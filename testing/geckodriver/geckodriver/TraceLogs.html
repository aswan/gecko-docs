

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Enabling trace logs &mdash; Mozilla Source Tree Docs 59.0a1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../search.html"/>
    <link rel="top" title="Mozilla Source Tree Docs 59.0a1 documentation" href="../../../index.html"/>
        <link rel="up" title="geckodriver" href="index.html"/>
        <link rel="next" title="Releasing geckodriver" href="Releasing.html"/>
        <link rel="prev" title="geckodriver" href="index.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> Mozilla Source Tree Docs
          

          
          </a>

          
            
            
              <div class="version">
                59.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../browser/base/sslerrorreport/index.html">SSL Error Reporting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../browser/browser/index.html">Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../browser/experiments/experiments/index.html">Telemetry Experiments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../build/buildsystem/index.html">Build System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dom/bindings/webidl/index.html">WebIDL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gfx/gfx/index.html">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mobile/android/fennec/index.html">Firefox for Android</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mobile/android/fennec/index.html#indices-and-tables">Indices and tables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mozbase/index.html">mozbase</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mozbase/index.html#indices-and-tables">Indices and tables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../python/mach/index.html">mach</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../taskcluster/taskcluster/index.html">TaskCluster Task-Graph Generation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">geckodriver</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html#for-users">For users</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Enabling trace logs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#c">C#</a></li>
<li class="toctree-l4"><a class="reference internal" href="#java">Java</a></li>
<li class="toctree-l4"><a class="reference internal" href="#python">Python</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ruby">Ruby</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#for-developers">For developers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../marionette/marionette/index.html">Marionette</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../toolkit/components/crashes/crash-manager/index.html">Crash Manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../toolkit/components/extensions/webextensions/index.html">WebExtensions API Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../toolkit/components/payments/docs/index.html">WebPayments UI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../toolkit/components/telemetry/telemetry/index.html">Telemetry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../toolkit/components/url-classifier/url-classifier/index.html">URL Classifier</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../toolkit/crashreporter/crashreporter/index.html">Crash Reporter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../toolkit/modules/subprocess/toolkit_modules/subprocess/index.html">Supbrocess Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../toolkit/modules/toolkit_modules/index.html">Toolkit modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../toolkit/mozapps/extensions/addon-manager/index.html">Add-on Manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tools/compare-locales/index.html">Localization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tools/lint/index.html">Linting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tools/lint/index.html#indices-and-tables">Indices and tables</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../python/mach.html">mach package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../python/mozbuild.html">mozbuild package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../python/mozlint.html">mozlint package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../python/mozpack.html">mozpack package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../python/mozversioncontrol.html">mozversioncontrol package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../python/mozwebidlcodegen.html">mozwebidlcodegen package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../python/taskgraph.html">taskgraph package</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Mozilla Source Tree Docs</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">geckodriver</a> &raquo;</li>
        
      <li>Enabling trace logs</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/testing/geckodriver/geckodriver/TraceLogs.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="enabling-trace-logs">
<span id="enabling-trace-logs"></span><h1>Enabling trace logs<a class="headerlink" href="#enabling-trace-logs" title="Permalink to this headline">¶</a></h1>
<p>geckodriver provides different bands of logs for different audiences.
The most important log entries are shown to everyone by default,
and these include which port geckodriver provides the WebDriver
API on, as well as informative warnings, errors, and fatal exceptions.</p>
<p>The different log bands are, in ascending bandwidth:</p>
<ol class="simple">
<li><code class="docutils literal"><span class="pre">fatal</span></code> is reserved for exceptional circumstances when geckodriver
or Firefox cannot recover.  This usually entails that either
one or both of the processes will exit.</li>
<li><code class="docutils literal"><span class="pre">error</span></code> messages are mistakes in the program code which it is
possible to recover from.</li>
<li><code class="docutils literal"><span class="pre">warn</span></code> shows warnings of more informative nature that are not
necessarily problems in geckodriver.  This could for example happen
if you use the legacy <code class="docutils literal"><span class="pre">desiredCapabilities</span></code>/<code class="docutils literal"><span class="pre">requiredCapabilities</span></code>
objects instead of the new <code class="docutils literal"><span class="pre">alwaysMatch</span></code>/<code class="docutils literal"><span class="pre">firstMatch</span></code> structures.</li>
<li><code class="docutils literal"><span class="pre">info</span></code> (default) contains information about which port geckodriver
binds to, but also all messages from the lower-bandwidth levels
listed above.</li>
<li><code class="docutils literal"><span class="pre">config</span></code> additionally shows the negotiated capabilities after
matching the <code class="docutils literal"><span class="pre">alwaysMatch</span></code> capabilities with the sequence of
<code class="docutils literal"><span class="pre">firstMatch</span></code> capabilities.</li>
<li><code class="docutils literal"><span class="pre">debug</span></code> is reserved for information that is useful when programming.</li>
<li><code class="docutils literal"><span class="pre">trace</span></code>, where in addition to itself, all previous levels
are included.  The trace level shows all HTTP requests received
by geckodriver, packets sent to and from the remote protocol in
Firefox, and responses sent back to your client.</li>
</ol>
<p>In other words this means that the configured level will coalesce
entries from all lower bands including itself.  If you set the log
level to <code class="docutils literal"><span class="pre">error</span></code>, you will get log entries for both <code class="docutils literal"><span class="pre">fatal</span></code> and <code class="docutils literal"><span class="pre">error</span></code>.
Similarly for <code class="docutils literal"><span class="pre">trace</span></code>, you will get all the logs that are offered.</p>
<p>To help debug a problem with geckodriver or Firefox, the trace-level
output is vital to understand what is going on.  This is why we ask
that trace logs are included when filing bugs gainst geckodriver.
It is only under very special circumstances that a trace log is
not needed, so you will normally find that our first action when
triaging your issue will be to ask you to include one.  Do yourself
and us a favour and provide a trace-level log right away.</p>
<p>To silence geckodriver altogether you may for example either redirect
all output to append to some log files:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">geckodriver</span> <span class="o">&gt;&gt;</span><span class="n">geckodriver</span><span class="o">.</span><span class="n">log</span> <span class="mi">2</span><span class="o">&gt;&gt;</span><span class="n">geckodriver</span><span class="o">.</span><span class="n">err</span><span class="o">.</span><span class="n">log</span>
</pre></div>
</div>
<p>Or a black hole somewhere:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">geckodriver</span> <span class="o">&gt;/</span><span class="n">dev</span><span class="o">/</span><span class="n">null</span> <span class="mi">2</span><span class="o">&gt;&amp;</span><span class="mi">1</span>
</pre></div>
</div>
<p>The log level set for geckodriver is propagated to the Marionette
logger in Firefox.  Marionette is the remote protocol that geckodriver
uses to implement WebDriver.  This means enabling trace logs for
geckodriver will also implicitly enable them for Marionette.</p>
<p>The log level is set in different ways.  Either by using the
<code class="docutils literal"><span class="pre">--log</span> <span class="pre">&lt;LEVEL&gt;</span></code> option, where <code class="docutils literal"><span class="pre">LEVEL</span></code> is one of the log levels
from the list above, or by using the <code class="docutils literal"><span class="pre">-v</span></code> (for debug) or <code class="docutils literal"><span class="pre">-vv</span></code>
(for trace) shorthands.  For example, the following command will
enable trace logs for both geckodriver and Marionette:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">geckodriver</span> <span class="o">-</span><span class="n">vv</span>
</pre></div>
</div>
<p>The second way of setting the log level is through capabilities.
geckodriver accepts a Mozila-specific configuration object
in <a class="reference external" href="../README.md#firefox-capabilities"><code class="docutils literal"><span class="pre">moz:firefoxOptions</span></code></a>.  This JSON Object, which is further
described in the <a class="reference external" href="../README.md">README</a> can hold Firefox-specific configuration,
such as which Firefox binary to use, additional preferences to set,
and of course which log level to use.</p>
<p>Each client has its own way of specifying capabilities, and some clients
include “helpers” for providing browser-specific configuration.
It is often advisable to use these helpers instead of encoding the
JSON Object yourself because it can be difficult to get the exact
details right, but if you choose to, it should look like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;moz:firefoxOptions&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;log&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;level&quot;</span><span class="p">:</span> <span class="s2">&quot;trace&quot;</span><span class="p">}}}</span>
</pre></div>
</div>
<p>Note that most known WebDriver clients, such as those provided by
the Selenium project, do not expose a way to actually <em>see</em> the logs
unless you redirect the log output to a particular file (using the
method shown above) or let the client “inherit” geckodriver’s
output, for example by redirecting the stdout and stderr streams to
its own.  The notable exceptions are the Python and Ruby bindings,
which surface geckodriver logs in a remarkable easy and efficient way.</p>
<p>See the client-specific documentation below for the most idiomatic
way to enable trace logs in your language.  We want to expand this
documentation to cover all the best known clients people use with
geckodriver.  If you find your language missing, please consider
<a class="reference external" href="../CONTRIBUTING.md">submitting a patch</a>.</p>
<div class="section" id="c">
<span id="c"></span><h2>C#<a class="headerlink" href="#c" title="Permalink to this headline">¶</a></h2>
<p>The Selenium <a class="reference external" href="https://seleniumhq.github.io/selenium/docs/api/dotnet/">C# client</a> comes with a <a class="reference external" href="https://seleniumhq.github.io/selenium/docs/api/dotnet/html/T_OpenQA_Selenium_Firefox_FirefoxOptions.htm"><code class="docutils literal"><span class="pre">FirefoxOptions</span></code></a> helper for
constructing the <a class="reference external" href="../README.md#firefox-capabilities"><code class="docutils literal"><span class="pre">moz:firefoxOptions</span></code></a> capabilities object:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">FirefoxOptions</span> <span class="n">options</span> <span class="o">=</span> <span class="n">new</span> <span class="n">FirefoxOptions</span><span class="p">();</span>
<span class="n">options</span><span class="o">.</span><span class="n">LogLevel</span> <span class="o">=</span>  <span class="n">FirefoxDriverLogLevel</span><span class="o">.</span><span class="n">Trace</span><span class="p">;</span>
<span class="n">IWebDriver</span> <span class="n">driver</span> <span class="o">=</span> <span class="n">new</span> <span class="n">FirefoxDriver</span><span class="p">(</span><span class="n">options</span><span class="p">);</span>
</pre></div>
</div>
<p>The log output is directed to stdout.</p>
</div>
<div class="section" id="java">
<span id="java"></span><h2>Java<a class="headerlink" href="#java" title="Permalink to this headline">¶</a></h2>
<p>The Selenium <a class="reference external" href="https://seleniumhq.github.io/selenium/docs/api/java/">Java client</a> also comes with
a <a class="reference external" href="https://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/firefox/FirefoxOptions.html"><code class="docutils literal"><span class="pre">org.openqa.selenium.firefox.FirefoxOptions</span></code></a> helper for
constructing the <a class="reference external" href="../README.md#firefox-capabilities"><code class="docutils literal"><span class="pre">moz:firefoxOptions</span></code></a> capabilities object:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">FirefoxOptions</span> <span class="n">options</span> <span class="o">=</span> <span class="n">new</span> <span class="n">FirefoxOptions</span><span class="p">();</span>
<span class="n">options</span><span class="o">.</span><span class="n">setLogLevel</span><span class="p">(</span><span class="n">FirefoxDriverLogLevel</span><span class="o">.</span><span class="n">TRACE</span><span class="p">);</span>
<span class="n">WebDriver</span> <span class="n">driver</span> <span class="o">=</span> <span class="n">new</span> <span class="n">FirefoxDriver</span><span class="p">(</span><span class="n">options</span><span class="p">);</span>
</pre></div>
</div>
<p>As with C#, the log output is helpfully propagated to stdout.</p>
</div>
<div class="section" id="python">
<span id="python"></span><h2>Python<a class="headerlink" href="#python" title="Permalink to this headline">¶</a></h2>
<p>The Selenium <a class="reference external" href="https://selenium-python.readthedocs.io/">Python client</a> comes with an
<a class="reference external" href="https://github.com/SeleniumHQ/selenium/blob/master/py/selenium/webdriver/firefox/options.py"><code class="docutils literal"><span class="pre">selenium.webdriver.firefox.options.Options</span></code></a> helper that can
be used programmatically to construct the <a class="reference external" href="../README.md#firefox-capabilities"><code class="docutils literal"><span class="pre">moz:firefoxOptions</span></code></a>
capabilities object:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">selenium.webdriver</span> <span class="k">import</span> <span class="n">Firefox</span>
<span class="kn">from</span> <span class="nn">selenium.webdriver.firefox.options</span> <span class="k">import</span> <span class="n">Options</span>

<span class="n">opts</span> <span class="o">=</span> <span class="n">Options</span><span class="p">()</span>
<span class="n">opts</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">level</span> <span class="o">=</span> <span class="s2">&quot;trace&quot;</span>
<span class="n">driver</span> <span class="o">=</span> <span class="n">Firefox</span><span class="p">(</span><span class="n">firefox_options</span><span class="o">=</span><span class="n">opts</span><span class="p">)</span>
</pre></div>
</div>
<p>The log output is stored in a file called <em>geckodriver.log</em> in your
script’s current working directory.</p>
</div>
<div class="section" id="ruby">
<span id="ruby"></span><h2>Ruby<a class="headerlink" href="#ruby" title="Permalink to this headline">¶</a></h2>
<p>The Selenium <a class="reference external" href="https://seleniumhq.github.io/selenium/docs/api/rb/">Ruby client</a> comes with an <a class="reference external" href="https://seleniumhq.github.io/selenium/docs/api/rb/Selenium/WebDriver/Firefox/Options.html"><code class="docutils literal"><span class="pre">Options</span></code></a> helper to
generate the correct <a class="reference external" href="../README.md#firefox-capabilities"><code class="docutils literal"><span class="pre">moz:firefoxOptions</span></code></a> capabilities object:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Selenium</span><span class="p">::</span><span class="n">WebDriver</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">level</span> <span class="o">=</span> <span class="p">:</span><span class="n">debug</span>
<span class="n">opts</span> <span class="o">=</span> <span class="n">Selenium</span><span class="p">::</span><span class="n">WebDriver</span><span class="p">::</span><span class="n">Firefox</span><span class="p">::</span><span class="n">Options</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">log_level</span><span class="p">:</span> <span class="p">:</span><span class="n">trace</span><span class="p">)</span>
<span class="n">driver</span> <span class="o">=</span> <span class="n">Selenium</span><span class="p">::</span><span class="n">WebDriver</span><span class="o">.</span><span class="k">for</span> <span class="p">:</span><span class="n">firefox</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="n">opts</span>
</pre></div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Releasing.html" class="btn btn-neutral float-right" title="Releasing geckodriver" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="geckodriver" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright .

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'59.0a1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>