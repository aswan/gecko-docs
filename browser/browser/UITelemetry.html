

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>UITelemetry data format &mdash; Mozilla Source Tree Docs 59.0a1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="Mozilla Source Tree Docs 59.0a1 documentation" href="../../index.html"/>
        <link rel="up" title="Firefox" href="index.html"/>
        <link rel="next" title="Browser Usage Telemetry" href="BrowserUsageTelemetry.html"/>
        <link rel="prev" title="Directory Links Architecture and Data Formats" href="DirectoryLinksProvider.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> Mozilla Source Tree Docs
          

          
          </a>

          
            
            
              <div class="version">
                59.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../base/sslerrorreport/index.html">SSL Error Reporting</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Firefox</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="DirectoryLinksProvider.html">Directory Links Architecture and Data Formats</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">UITelemetry data format</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#toolbars"><code class="docutils literal"><span class="pre">toolbars</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#countableevents"><code class="docutils literal"><span class="pre">countableEvents</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#uitour"><code class="docutils literal"><span class="pre">UITour</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#contextmenu"><code class="docutils literal"><span class="pre">contextmenu</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="BrowserUsageTelemetry.html">Browser Usage Telemetry</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../experiments/experiments/index.html">Telemetry Experiments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../build/buildsystem/index.html">Build System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dom/bindings/webidl/index.html">WebIDL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gfx/gfx/index.html">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mobile/android/fennec/index.html">Firefox for Android</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mobile/android/fennec/index.html#indices-and-tables">Indices and tables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mozbase/index.html">mozbase</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mozbase/index.html#indices-and-tables">Indices and tables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python/mach/index.html">mach</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../taskcluster/taskcluster/index.html">TaskCluster Task-Graph Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing/geckodriver/geckodriver/index.html">geckodriver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing/marionette/marionette/index.html">Marionette</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../toolkit/components/crashes/crash-manager/index.html">Crash Manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../toolkit/components/extensions/webextensions/index.html">WebExtensions API Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../toolkit/components/payments/docs/index.html">WebPayments UI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../toolkit/components/telemetry/telemetry/index.html">Telemetry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../toolkit/components/url-classifier/url-classifier/index.html">URL Classifier</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../toolkit/crashreporter/crashreporter/index.html">Crash Reporter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../toolkit/modules/subprocess/toolkit_modules/subprocess/index.html">Supbrocess Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../toolkit/modules/toolkit_modules/index.html">Toolkit modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../toolkit/mozapps/extensions/addon-manager/index.html">Add-on Manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/compare-locales/index.html">Localization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/lint/index.html">Linting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/lint/index.html#indices-and-tables">Indices and tables</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../python/mach.html">mach package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python/mozbuild.html">mozbuild package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python/mozlint.html">mozlint package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python/mozpack.html">mozpack package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python/mozversioncontrol.html">mozversioncontrol package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python/mozwebidlcodegen.html">mozwebidlcodegen package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python/taskgraph.html">taskgraph package</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Mozilla Source Tree Docs</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Firefox</a> &raquo;</li>
        
      <li>UITelemetry data format</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/browser/browser/UITelemetry.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="uitelemetry-data-format">
<span id="uitelemetry"></span><h1>UITelemetry data format<a class="headerlink" href="#uitelemetry-data-format" title="Permalink to this headline">¶</a></h1>
<p>UI Telemetry sends its data as a JSON blob. This document describes the different parts
of the JSON blob.</p>
<div class="section" id="toolbars">
<h2><code class="docutils literal"><span class="pre">toolbars</span></code><a class="headerlink" href="#toolbars" title="Permalink to this headline">¶</a></h2>
<p>This tracks the state of the user’s UI customizations. It has the following properties:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">sizemode</span></code> - string indicating whether the window is in maximized, normal (restored) or
fullscreen mode;</li>
<li><code class="docutils literal"><span class="pre">bookmarksBarEnabled</span></code> - boolean indicating whether the bookmarks bar is visible;</li>
<li><code class="docutils literal"><span class="pre">menuBarEnabled</span></code> - boolean indicating whether the menu bar is visible (always false on OS X);</li>
<li><code class="docutils literal"><span class="pre">titleBarEnabled</span></code> - boolean indicating whether the (real) titlebar is visible (rather than
having tabs in the titlebar);</li>
<li><code class="docutils literal"><span class="pre">defaultKept</span></code> - list of strings identifying toolbar buttons and items that are still in their
default position. Only the IDs of builtin widgets are sent (ie not add-on widgets);</li>
<li><code class="docutils literal"><span class="pre">defaultMoved</span></code> - list of strings identifying toolbar buttons and items that are no longer in
their default position, but have not been removed to the palette. Only the IDs of builtin widgets
are sent (ie not add-on widgets);</li>
<li><code class="docutils literal"><span class="pre">nondefaultAdded</span></code> - list of strings identifying toolbar buttons and items that have been added
from the palette. Only the IDs of builtin widgets are sent (ie not add-on widgets);</li>
<li><code class="docutils literal"><span class="pre">defaultRemoved</span></code> - list of strings identifying toolbar buttons and items that are in the
palette that are elsewhere by default. Only the IDs of builtin widgets are sent
(ie not add-on widgets);</li>
<li><code class="docutils literal"><span class="pre">addonToolbars</span></code> - the number of non-default toolbars that are customizable. 1 by default
because it counts the add-on bar shim;</li>
<li><code class="docutils literal"><span class="pre">visibleTabs</span></code> - array of the number of visible tabs per window;</li>
<li><code class="docutils literal"><span class="pre">hiddenTabs</span></code> - array of the number of hidden tabs per window (ie tabs in panorama groups which
are not the current group);</li>
<li><code class="docutils literal"><span class="pre">countableEvents</span></code> - please refer to the next section.</li>
<li><code class="docutils literal"><span class="pre">durations</span></code> - an object mapping descriptions to duration records, which records the amount of
time a user spent doing something. Currently only has one property:<ul>
<li><code class="docutils literal"><span class="pre">customization</span></code> - how long a user spent customizing the browser. This is an array of
objects, where each object has a <code class="docutils literal"><span class="pre">duration</span></code> property indicating the time in milliseconds,
and a <code class="docutils literal"><span class="pre">bucket</span></code> property indicating a bucket in which the duration info falls.</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="countableevents">
<span id="uitelemetry-countableevents"></span><h2><code class="docutils literal"><span class="pre">countableEvents</span></code><a class="headerlink" href="#countableevents" title="Permalink to this headline">¶</a></h2>
<p>Countable events are stored under the <code class="docutils literal"><span class="pre">toolbars</span></code> section. They count the number of times certain
events happen. No timing or other correlating information is stored - purely the number of times
things happen.</p>
<p><code class="docutils literal"><span class="pre">countableEvents</span></code> contains a list of buckets as its properties. A bucket represents the state the browser was in when these events occurred, such as currently running an interactive tour. There are 3 types of buckets:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">__DEFAULT__</span></code> - No bucket, for times when the browser is not in any special state.</li>
<li><code class="docutils literal"><span class="pre">bucket_&lt;NAME&gt;</span></code> - Normal buckets, for when the browser is in a special state. The <code class="docutils literal"><span class="pre">&lt;NAME&gt;</span></code> in the bucket ID is the name associated with the bucket and may be further broken down into parts by the <code class="docutils literal"><span class="pre">|</span></code> character.</li>
<li><code class="docutils literal"><span class="pre">bucket_&lt;NAME&gt;|&lt;INTERVAL&gt;</span></code> - Expiring buckets, which are similar to a countdown timer. The <code class="docutils literal"><span class="pre">&lt;INTERVAL&gt;</span></code> in the bucket ID describes the time interval the recorded event happened in. The intervals are <code class="docutils literal"><span class="pre">1m</span></code> (one minute), <code class="docutils literal"><span class="pre">3m</span></code> (three minutes), <code class="docutils literal"><span class="pre">10m</span></code> (ten minutes), and <code class="docutils literal"><span class="pre">1h</span></code> (one hour). After one hour, the <code class="docutils literal"><span class="pre">__DEFAULT__</span></code> bucket is automatically used again.</li>
</ul>
<p>Each bucket is an object with the following properties:</p>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">click-builtin-item</span></code> is an object tracking clicks on builtin customizable toolbar items, keyed
off the item IDs, with an object for each item with keys <code class="docutils literal"><span class="pre">left</span></code>, <code class="docutils literal"><span class="pre">middle</span></code> and <code class="docutils literal"><span class="pre">right</span></code> each
storing a number indicating how often the respective type of click has happened.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">click-menu-button</span></code> is the same, except the item ID is always ‘button’.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">click-bookmarks-bar</span></code> is the same, with the item IDs being replaced by either <code class="docutils literal"><span class="pre">container</span></code> for
clicks on bookmark or livemark folders, and <code class="docutils literal"><span class="pre">item</span></code> for individual bookmarks.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">click-menubar</span></code> is similar, with the item IDs being replaced by one of <code class="docutils literal"><span class="pre">menu</span></code>, <code class="docutils literal"><span class="pre">menuitem</span></code>
or <code class="docutils literal"><span class="pre">other</span></code>, depending on the kind of item clicked. Note that this is not tracked on OS X, where
we can’t listen for these events because of the global menubar.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">click-bookmarks-menu-button</span></code> is also similar, with the item IDs being replaced by:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">menu</span></code> for clicks on the ‘menu’ part of the item;</li>
<li><code class="docutils literal"><span class="pre">add</span></code> for clicks that add a bookmark;</li>
<li><code class="docutils literal"><span class="pre">edit</span></code> for clicks that open the panel to edit an existing bookmark;</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">in-panel</span></code> for clicks when the button is in the menu panel, and clicking it does none of the</dt>
<dd>above;</dd>
</dl>
</li>
</ul>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">customize</span></code> tracks different types of customization events without the <code class="docutils literal"><span class="pre">left</span></code>, <code class="docutils literal"><span class="pre">middle</span></code> and
<code class="docutils literal"><span class="pre">right</span></code> distinctions. The different events are the following, with each storing a count of the
number of times they occurred:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">start</span></code> counts the number of times the user starts customizing;</li>
<li><code class="docutils literal"><span class="pre">add</span></code> counts the number of times an item is added somewhere from the palette;</li>
<li><code class="docutils literal"><span class="pre">move</span></code> counts the number of times an item is moved somewhere else (but not to the palette);</li>
<li><code class="docutils literal"><span class="pre">remove</span></code> counts the number of times an item is removed to the palette;</li>
<li><code class="docutils literal"><span class="pre">reset</span></code> counts the number of times the ‘restore defaults’ button is used;</li>
</ul>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">search</span></code> is an object tracking searches of various types, keyed off the search</dt>
<dd><p class="first last">location, storing a number indicating how often the respective type of search
has happened.</p>
</dd>
</dl>
<ul class="simple">
<li>There are also two special keys that mean slightly different things.<ul>
<li><code class="docutils literal"><span class="pre">urlbar-keyword</span></code> records searches that would have been an invalid-protocol
error, but are now keyword searches.  They are also counted in the <code class="docutils literal"><span class="pre">urlbar</span></code>
keyword (along with all the other urlbar searches).</li>
<li><code class="docutils literal"><span class="pre">selection</span></code> searches records selections of search suggestions.  They include
the source, the index of the selection, and the kind of selection (mouse or
enter key).  Selection searches are also counted in their sources.</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="uitour">
<h2><code class="docutils literal"><span class="pre">UITour</span></code><a class="headerlink" href="#uitour" title="Permalink to this headline">¶</a></h2>
<p>The UITour API provides ways for pages on trusted domains to safely interact with the browser UI and request it to perform actions such as opening menus and showing highlights over the browser chrome - for the purposes of interactive tours. We track some usage of this API via the <code class="docutils literal"><span class="pre">UITour</span></code> object in the UI Telemetry output.</p>
<p>Each page is able to register itself with an identifier, a <code class="docutils literal"><span class="pre">Page</span> <span class="pre">ID</span></code>. A list of Page IDs that have been seen over the last 8 weeks is available via <code class="docutils literal"><span class="pre">seenPageIDs</span></code>.</p>
<p>Page IDs are also used to identify buckets for <a class="reference internal" href="#uitelemetry-countableevents"><span class="std std-ref">countableEvents</span></a>, in the following circumstances:</p>
<ul class="simple">
<li>The current tab is a tour page. This will be a normal bucket with the name <code class="docutils literal"><span class="pre">UITour|&lt;PAGEID&gt;</span></code>, where <code class="docutils literal"><span class="pre">&lt;PAGEID&gt;</span></code> is the page’s registered ID. This will result in bucket IDs such as <code class="docutils literal"><span class="pre">bucket_UITour|australis-tour</span></code>.</li>
<li>A tour tab is open but another tab is active. This will be an expiring bucket with the name <code class="docutils literal"><span class="pre">UITour|&lt;PAGEID&gt;|inactive</span></code>. This will result in bucket IDs such as <code class="docutils literal"><span class="pre">bucket_UITour|australis-tour|inactive|1m</span></code>.</li>
<li>A tour tab has recently been open but has been closed. This will be an expiring bucket with the name <code class="docutils literal"><span class="pre">UITour|&lt;PAGEID&gt;|closed</span></code>. This will result in bucket IDs such as <code class="docutils literal"><span class="pre">bucket_UITour|australis-tour|closed|10m</span></code>.</li>
</ul>
</div>
<div class="section" id="contextmenu">
<h2><code class="docutils literal"><span class="pre">contextmenu</span></code><a class="headerlink" href="#contextmenu" title="Permalink to this headline">¶</a></h2>
<p>We track context menu interactions to figure out which ones are most often used and/or how
effective they are. In the <code class="docutils literal"><span class="pre">contextmenu</span></code> object, we first store things per-bucket. Next, we
divide the following different context menu situations:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">selection</span></code> if there is content on the page that’s selected on which the user clicks;</li>
<li><code class="docutils literal"><span class="pre">link</span></code> if the user opened the context menu for a link</li>
<li><code class="docutils literal"><span class="pre">image-link</span></code> if the user opened the context menu on an image or canvas that’s a link;</li>
<li><code class="docutils literal"><span class="pre">image</span></code> if the user opened the context menu on an image (that isn’t a link);</li>
<li><code class="docutils literal"><span class="pre">canvas</span></code> if the user opened the context menu on a canvas (that isn’t a link);</li>
<li><code class="docutils literal"><span class="pre">media</span></code> if the user opened the context menu on an HTML video or audio element;</li>
<li><code class="docutils literal"><span class="pre">input</span></code> if the user opened the context menu on a text input element;</li>
<li><code class="docutils literal"><span class="pre">other</span></code> for all other openings of the content menu;</li>
</ul>
<p>Each of these objects (if they exist) then gets a “withcustom” and/or a “withoutcustom” property
for context menus opened with custom page-created items and without them, and each of those
properties holds an object with IDs corresponding to a count of how often an item with that ID was
activated in the context menu. Only builtin context menu items are tracked, and besides those items
there are four special items which get counts:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">close-without-interaction</span></code> is incremented when the user closes the context menu without interacting with it;</li>
<li><code class="docutils literal"><span class="pre">custom-page-item</span></code> is incremented when the user clicks an item that was created by the page;</li>
<li><code class="docutils literal"><span class="pre">unknown</span></code> is incremented when an item without an ID was clicked;</li>
<li><code class="docutils literal"><span class="pre">other-item</span></code> is incremented when an add-on-provided menuitem is clicked.</li>
</ul>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="BrowserUsageTelemetry.html" class="btn btn-neutral float-right" title="Browser Usage Telemetry" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="DirectoryLinksProvider.html" class="btn btn-neutral" title="Directory Links Architecture and Data Formats" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright .

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'59.0a1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>