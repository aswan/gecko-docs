

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Running Linters Locally &mdash; Mozilla Source Tree Docs 59.0a1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="Mozilla Source Tree Docs 59.0a1 documentation" href="../../index.html"/>
        <link rel="up" title="Linting" href="index.html"/>
        <link rel="next" title="Adding a New Linter to the Tree" href="create.html"/>
        <link rel="prev" title="Linting" href="index.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> Mozilla Source Tree Docs
          

          
          </a>

          
            
            
              <div class="version">
                59.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../browser/base/sslerrorreport/index.html">SSL Error Reporting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../browser/browser/index.html">Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../browser/experiments/experiments/index.html">Telemetry Experiments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../build/buildsystem/index.html">Build System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dom/bindings/webidl/index.html">WebIDL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gfx/gfx/index.html">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mobile/android/fennec/index.html">Firefox for Android</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mobile/android/fennec/index.html#indices-and-tables">Indices and tables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mozbase/index.html">mozbase</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mozbase/index.html#indices-and-tables">Indices and tables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python/mach/index.html">mach</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../taskcluster/taskcluster/index.html">TaskCluster Task-Graph Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing/geckodriver/geckodriver/index.html">geckodriver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing/marionette/marionette/index.html">Marionette</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../toolkit/components/crashes/crash-manager/index.html">Crash Manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../toolkit/components/extensions/webextensions/index.html">WebExtensions API Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../toolkit/components/payments/docs/index.html">WebPayments UI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../toolkit/components/telemetry/telemetry/index.html">Telemetry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../toolkit/components/url-classifier/url-classifier/index.html">URL Classifier</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../toolkit/crashreporter/crashreporter/index.html">Crash Reporter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../toolkit/modules/subprocess/toolkit_modules/subprocess/index.html">Supbrocess Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../toolkit/modules/toolkit_modules/index.html">Toolkit modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../toolkit/mozapps/extensions/addon-manager/index.html">Add-on Manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../compare-locales/index.html">Localization</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Linting</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Running Linters Locally</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#using-the-command-line">Using the Command Line</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-a-vcs-hook">Using a VCS Hook</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#fixing-lint-errors">Fixing Lint Errors</a></li>
<li class="toctree-l2"><a class="reference internal" href="create.html">Adding a New Linter to the Tree</a></li>
<li class="toctree-l2"><a class="reference internal" href="linters/eslint.html">ESLint</a></li>
<li class="toctree-l2"><a class="reference internal" href="linters/flake8.html">Flake8</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#indices-and-tables">Indices and tables</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../python/mach.html">mach package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python/mozbuild.html">mozbuild package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python/mozlint.html">mozlint package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python/mozpack.html">mozpack package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python/mozversioncontrol.html">mozversioncontrol package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python/mozwebidlcodegen.html">mozwebidlcodegen package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python/taskgraph.html">taskgraph package</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Mozilla Source Tree Docs</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Linting</a> &raquo;</li>
        
      <li>Running Linters Locally</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/tools/lint/usage.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="running-linters-locally">
<h1>Running Linters Locally<a class="headerlink" href="#running-linters-locally" title="Permalink to this headline">¶</a></h1>
<div class="section" id="using-the-command-line">
<h2>Using the Command Line<a class="headerlink" href="#using-the-command-line" title="Permalink to this headline">¶</a></h2>
<p>You can run all the various linters in the tree using the <code class="docutils literal"><span class="pre">mach</span> <span class="pre">lint</span></code> command. Simply pass in the
directory or file you wish to lint (defaults to current working directory):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">mach</span> <span class="n">lint</span> <span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">files</span>
</pre></div>
</div>
<p>Multiple paths are allowed:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">mach</span> <span class="n">lint</span> <span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">foo</span><span class="o">.</span><span class="n">js</span> <span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">bar</span><span class="o">.</span><span class="n">py</span> <span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="nb">dir</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">Mozlint</span></code> will automatically determine which types of files exist, and which linters need to be run
against them. For example, if the directory contains both JavaScript and Python files then mozlint
will automatically run both ESLint and Flake8 against those files respectively.</p>
<p>To restrict which linters are invoked manually, pass in <code class="docutils literal"><span class="pre">-l/--linter</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">mach</span> <span class="n">lint</span> <span class="o">-</span><span class="n">l</span> <span class="n">eslint</span> <span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">files</span>
</pre></div>
</div>
<p>Finally, <code class="docutils literal"><span class="pre">mozlint</span></code> can lint the files touched by outgoing revisions or the working directory using
the <code class="docutils literal"><span class="pre">-o/--outgoing</span></code> and <code class="docutils literal"><span class="pre">-w/--workdir</span></code> arguments respectively. These work both with mercurial and
git. In the case of <code class="docutils literal"><span class="pre">--outgoing</span></code>, the default remote repository the changes would be pushed to is
used as the comparison. If desired, a remote can be specified manually. In git, you may only want to
lint staged commits from the working directory, this can be accomplished with <code class="docutils literal"><span class="pre">--workdir=staged</span></code>.
Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">mach</span> <span class="n">lint</span> <span class="o">--</span><span class="n">workdir</span>
<span class="o">./</span><span class="n">mach</span> <span class="n">lint</span> <span class="o">--</span><span class="n">workdir</span><span class="o">=</span><span class="n">staged</span>
<span class="o">./</span><span class="n">mach</span> <span class="n">lint</span> <span class="o">--</span><span class="n">outgoing</span>
<span class="o">./</span><span class="n">mach</span> <span class="n">lint</span> <span class="o">--</span><span class="n">outgoing</span> <span class="n">origin</span><span class="o">/</span><span class="n">master</span>
<span class="o">./</span><span class="n">mach</span> <span class="n">lint</span> <span class="o">-</span><span class="n">wo</span>
</pre></div>
</div>
</div>
<div class="section" id="using-a-vcs-hook">
<h2>Using a VCS Hook<a class="headerlink" href="#using-a-vcs-hook" title="Permalink to this headline">¶</a></h2>
<p>There are also both pre-commit and pre-push version control hooks that work in
either hg or git. To enable a pre-push hg hook, add the following to hgrc:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">hooks</span><span class="p">]</span>
<span class="n">pre</span><span class="o">-</span><span class="n">push</span><span class="o">.</span><span class="n">lint</span> <span class="o">=</span> <span class="n">python</span><span class="p">:</span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">gecko</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">lint</span><span class="o">/</span><span class="n">hooks</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="n">hg</span>
</pre></div>
</div>
<p>To enable a pre-commit hg hook, add the following to hgrc:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">hooks</span><span class="p">]</span>
<span class="n">pretxncommit</span><span class="o">.</span><span class="n">lint</span> <span class="o">=</span> <span class="n">python</span><span class="p">:</span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">gecko</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">lint</span><span class="o">/</span><span class="n">hooks</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="n">hg</span>
</pre></div>
</div>
<p>To enable a pre-push git hook, run the following command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ ln -s /path/to/gecko/tools/lint/hooks.py .git/hooks/pre-push
</pre></div>
</div>
<p>To enable a pre-commit git hook, run the following command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ ln -s /path/to/gecko/tools/lint/hooks.py .git/hooks/pre-commit
</pre></div>
</div>
</div>
</div>
<div class="section" id="fixing-lint-errors">
<h1>Fixing Lint Errors<a class="headerlink" href="#fixing-lint-errors" title="Permalink to this headline">¶</a></h1>
<p><code class="docutils literal"><span class="pre">Mozlint</span></code> has a best-effort ability to fix lint errors:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ ./mach lint --fix
</pre></div>
</div>
<p>Not all linters support fixing, and even the ones that do can not usually fix
all types of errors. Any errors that cannot be automatically fixed, will be
printed to stdout like normal. In that case, you can also fix errors manually:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ ./mach lint --edit
</pre></div>
</div>
<p>This requires the $EDITOR environment variable be defined. For most editors,
this will simply open each file containing errors one at a time. For vim (or
neovim), this will populate the <a class="reference external" href="http://vimdoc.sourceforge.net/htmldoc/quickfix.html">quickfix list</a> with the errors.</p>
<p>The <code class="docutils literal"><span class="pre">--fix</span></code> and <code class="docutils literal"><span class="pre">--edit</span></code> arguments can be combined, in which case any
errors that can be fixed automatically will be, and the rest will be opened
with your $EDITOR.</p>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="create.html" class="btn btn-neutral float-right" title="Adding a New Linter to the Tree" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Linting" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright .

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'59.0a1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>