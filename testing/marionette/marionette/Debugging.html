

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Debugging &mdash; Mozilla Source Tree Docs 59.0a1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../search.html"/>
    <link rel="top" title="Mozilla Source Tree Docs 59.0a1 documentation" href="../../../index.html"/>
        <link rel="up" title="Marionette" href="index.html"/>
        <link rel="next" title="Mn Python tests" href="PythonTests.html"/>
        <link rel="prev" title="New contributors" href="NewContributors.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> Mozilla Source Tree Docs
          

          
          </a>

          
            
            
              <div class="version">
                59.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../browser/base/sslerrorreport/index.html">SSL Error Reporting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../browser/browser/index.html">Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../browser/experiments/experiments/index.html">Telemetry Experiments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../build/buildsystem/index.html">Build System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dom/bindings/webidl/index.html">WebIDL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gfx/gfx/index.html">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mobile/android/fennec/index.html">Firefox for Android</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mobile/android/fennec/index.html#indices-and-tables">Indices and tables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mozbase/index.html">mozbase</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mozbase/index.html#indices-and-tables">Indices and tables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../python/mach/index.html">mach</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../taskcluster/taskcluster/index.html">TaskCluster Task-Graph Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../geckodriver/geckodriver/index.html">geckodriver</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Marionette</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#description">Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#for-users">For users</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#for-developers">For developers</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="NewContributors.html">New contributors</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Debugging</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#redirecting-the-gecko-output">Redirecting the Gecko output</a></li>
<li class="toctree-l4"><a class="reference internal" href="#javascript-debugger">JavaScript debugger</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="PythonTests.html">Mn Python tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="SeleniumAtoms.html">Selenium Atoms</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#bugs">Bugs</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#communication">Communication</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../toolkit/components/crashes/crash-manager/index.html">Crash Manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../toolkit/components/extensions/webextensions/index.html">WebExtensions API Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../toolkit/components/payments/docs/index.html">WebPayments UI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../toolkit/components/telemetry/telemetry/index.html">Telemetry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../toolkit/components/url-classifier/url-classifier/index.html">URL Classifier</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../toolkit/crashreporter/crashreporter/index.html">Crash Reporter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../toolkit/modules/subprocess/toolkit_modules/subprocess/index.html">Supbrocess Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../toolkit/modules/toolkit_modules/index.html">Toolkit modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../toolkit/mozapps/extensions/addon-manager/index.html">Add-on Manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tools/compare-locales/index.html">Localization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tools/lint/index.html">Linting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tools/lint/index.html#indices-and-tables">Indices and tables</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../python/mach.html">mach package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../python/mozbuild.html">mozbuild package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../python/mozlint.html">mozlint package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../python/mozpack.html">mozpack package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../python/mozversioncontrol.html">mozversioncontrol package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../python/mozwebidlcodegen.html">mozwebidlcodegen package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../python/taskgraph.html">taskgraph package</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Mozilla Source Tree Docs</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Marionette</a> &raquo;</li>
        
      <li>Debugging</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/testing/marionette/marionette/Debugging.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="debugging">
<span id="debugging"></span><h1>Debugging<a class="headerlink" href="#debugging" title="Permalink to this headline">¶</a></h1>
<div class="section" id="redirecting-the-gecko-output">
<span id="redirecting-the-gecko-output"></span><h2>Redirecting the Gecko output<a class="headerlink" href="#redirecting-the-gecko-output" title="Permalink to this headline">¶</a></h2>
<p>The most common way to debug Marionette, as well as chrome code in
general, is to use <code class="docutils literal"><span class="pre">dump()</span></code> to print a string to stdout.  In Firefox,
this log output normally ends up in the gecko.log file in your current
working directory.  With Fennec it can be inspected using <code class="docutils literal"><span class="pre">adb</span> <span class="pre">logcat</span></code>.</p>
<p><code class="docutils literal"><span class="pre">mach</span> <span class="pre">marionette</span> <span class="pre">test</span></code> takes a <code class="docutils literal"><span class="pre">--gecko-log</span></code> option which lets
you redirect this output stream.  This is convenient if you want to
“merge” the test harness output with the stdout from the browser.
Per Unix conventions you can use <code class="docutils literal"><span class="pre">-</span></code> (dash) to have Firefox write
its log to stdout instead of file:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="o">./</span><span class="n">mach</span> <span class="n">marionette</span> <span class="n">test</span> <span class="o">--</span><span class="n">gecko</span><span class="o">-</span><span class="n">log</span> <span class="o">-</span>
</pre></div>
</div>
<p>This debugging technique can be particularly effective when combined
with using <a class="reference external" href="https://docs.python.org/2/library/pdb.html">pdb</a> in the Python client or the JS remote debugger
that is described below.</p>
</div>
<div class="section" id="javascript-debugger">
<span id="javascript-debugger"></span><h2>JavaScript debugger<a class="headerlink" href="#javascript-debugger" title="Permalink to this headline">¶</a></h2>
<p>You can attach a JavaScript debugger to the Marionette server
through the <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Tools/Browser_Toolbox">Browser Toolbox</a>.  This enables you to introspect and
set breakpoints in Gecko chrome code, which is a far more powerful
debuggin technique than using <code class="docutils literal"><span class="pre">dump()</span></code> or <code class="docutils literal"><span class="pre">console.log()</span></code>.</p>
<p>The browser toolbox can be opened automatically when running Mn
tests by passing <code class="docutils literal"><span class="pre">--jsdebugger</span></code> to the mach command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="o">./</span><span class="n">mach</span> <span class="n">marionette</span> <span class="n">test</span> <span class="o">--</span><span class="n">jsdebugger</span>
</pre></div>
</div>
<p>It will prompt you when to start the test run to allow you time to
set your breakpoints.  It will also prompt you between each test.</p>
<p>For reference, below is the list of preferences that enables the
chrome debugger for Marionette.  These are all set implicitly when
<code class="docutils literal"><span class="pre">--jsdebugger</span></code> is passed to mach.  In non-official builds, which
are the default when built using <code class="docutils literal"><span class="pre">./mach</span> <span class="pre">build</span></code>, you will find that
the chrome debugger won’t prompt for connection and will allow
remote connections.</p>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">devtools.debugger.prompt-connection</span></code> → true</p>
<p>Controls the remote connection prompt.  Note that this will
automatically expose your Firefox instance to the network.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">devtools.chrome.enabled</span></code> → true</p>
<p>Enables debugging of chrome code.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">devtools.debugger.remote-enabled</span></code> → true</p>
<p>Allows a remote debugger to connect, which is necessary for
debugging chrome code.</p>
</li>
</ul>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="PythonTests.html" class="btn btn-neutral float-right" title="Mn Python tests" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="NewContributors.html" class="btn btn-neutral" title="New contributors" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright .

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'59.0a1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>