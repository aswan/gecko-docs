

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Install tracking with the Adjust SDK &mdash; Mozilla Source Tree Docs 59.0a1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../search.html"/>
    <link rel="top" title="Mozilla Source Tree Docs 59.0a1 documentation" href="../../../index.html"/>
        <link rel="up" title="Firefox for Android" href="index.html"/>
        <link rel="next" title="MMA Mobile Marketing Automation" href="mma.html"/>
        <link rel="prev" title="Downloadable content (DLC) UI Telemetry" href="downloadcontenttelemetry.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> Mozilla Source Tree Docs
          

          
          </a>

          
            
            
              <div class="version">
                59.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../browser/base/sslerrorreport/index.html">SSL Error Reporting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../browser/browser/index.html">Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../browser/experiments/experiments/index.html">Telemetry Experiments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../build/buildsystem/index.html">Build System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dom/bindings/webidl/index.html">WebIDL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gfx/gfx/index.html">Graphics</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Firefox for Android</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="localeswitching.html">Runtime locale switching in Fennec</a></li>
<li class="toctree-l2"><a class="reference internal" href="uitelemetry.html">UI Telemetry</a></li>
<li class="toctree-l2"><a class="reference internal" href="activitystreamtelemetry.html">Activity Stream UI Telemetry</a></li>
<li class="toctree-l2"><a class="reference internal" href="downloadcontenttelemetry.html">Downloadable content (DLC) UI Telemetry</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Install tracking with the Adjust SDK</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#data-collection">Data collection</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#when-is-data-collected-and-sent-to-the-adjust-backend">When is data collected and sent to the Adjust backend?</a></li>
<li class="toctree-l4"><a class="reference internal" href="#where-does-data-sent-to-the-adjust-backend-go">Where does data sent to the Adjust backend go?</a></li>
<li class="toctree-l4"><a class="reference internal" href="#what-data-is-collected-and-sent-to-the-adjust-backend">What data is collected and sent to the Adjust backend?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#technical-notes">Technical notes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#build-flags-controlling-the-adjust-sdk-integration">Build flags controlling the Adjust SDK integration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#technical-notes-on-the-adjust-sdk-integration">Technical notes on the Adjust SDK integration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#notes-and-links">Notes and links</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="mma.html">MMA Mobile Marketing Automation</a></li>
<li class="toctree-l2"><a class="reference internal" href="defaultdomains.html">Shipping Default Domains</a></li>
<li class="toctree-l2"><a class="reference internal" href="shutdown.html">Shutting down Firefox for Android</a></li>
<li class="toctree-l2"><a class="reference internal" href="push.html">The architecture of the Fennec Webpush implementation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#indices-and-tables">Indices and tables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mozbase/index.html">mozbase</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mozbase/index.html#indices-and-tables">Indices and tables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../python/mach/index.html">mach</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../taskcluster/taskcluster/index.html">TaskCluster Task-Graph Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../testing/geckodriver/geckodriver/index.html">geckodriver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../testing/marionette/marionette/index.html">Marionette</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../toolkit/components/crashes/crash-manager/index.html">Crash Manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../toolkit/components/extensions/webextensions/index.html">WebExtensions API Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../toolkit/components/payments/docs/index.html">WebPayments UI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../toolkit/components/telemetry/telemetry/index.html">Telemetry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../toolkit/components/url-classifier/url-classifier/index.html">URL Classifier</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../toolkit/crashreporter/crashreporter/index.html">Crash Reporter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../toolkit/modules/subprocess/toolkit_modules/subprocess/index.html">Supbrocess Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../toolkit/modules/toolkit_modules/index.html">Toolkit modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../toolkit/mozapps/extensions/addon-manager/index.html">Add-on Manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tools/compare-locales/index.html">Localization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tools/lint/index.html">Linting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tools/lint/index.html#indices-and-tables">Indices and tables</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../python/mach.html">mach package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../python/mozbuild.html">mozbuild package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../python/mozlint.html">mozlint package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../python/mozpack.html">mozpack package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../python/mozversioncontrol.html">mozversioncontrol package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../python/mozwebidlcodegen.html">mozwebidlcodegen package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../python/taskgraph.html">taskgraph package</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Mozilla Source Tree Docs</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Firefox for Android</a> &raquo;</li>
        
      <li>Install tracking with the Adjust SDK</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/mobile/android/fennec/adjust.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="install-tracking-with-the-adjust-sdk">
<h1>Install tracking with the Adjust SDK<a class="headerlink" href="#install-tracking-with-the-adjust-sdk" title="Permalink to this headline">¶</a></h1>
<p>Fennec (Firefox for Android) tracks certain types of installs using a third party install tracking
framework called Adjust.  The intention is to determine the origin of Fennec installs by answering
the question, “Did this user on this device install Fennec in response to a specific advertising
campaign performed by Mozilla?”</p>
<p>Mozilla is using a third party framework in order to answer this question for the Firefox for
Android 38.0.5 release.  We hope to remove the framework from Fennec in the future.</p>
<p>The framework consists of a software development kit (SDK) built into Fennec and a
data-collecting Internet service backend run by the German company <a class="reference external" href="http://www.adjust.com">adjust GmbH</a>.  The Adjust SDK
is open source and MIT licensed: see the <a class="reference external" href="https://github.com/adjust/android_sdk">github repository</a>.  Fennec ships a copy of the SDK
(currently not modified from upstream) in <code class="docutils literal"><span class="pre">mobile/android/thirdparty/com/adjust/sdk</span></code>.  The SDK is
documented at <a class="reference external" href="https://docs.adjust.com">https://docs.adjust.com</a>.</p>
<div class="section" id="data-collection">
<h2>Data collection<a class="headerlink" href="#data-collection" title="Permalink to this headline">¶</a></h2>
<div class="section" id="when-is-data-collected-and-sent-to-the-adjust-backend">
<h3>When is data collected and sent to the Adjust backend?<a class="headerlink" href="#when-is-data-collected-and-sent-to-the-adjust-backend" title="Permalink to this headline">¶</a></h3>
<p>Data is never collected (or sent to the Adjust backend) unless</p>
<ul class="simple">
<li>the Fennec binary is an official Mozilla binary <a class="footnote-reference" href="#official" id="id1">[1]</a>; and</li>
<li>the release channel is Release or Beta <a class="footnote-reference" href="#channel" id="id2">[2]</a>.</li>
</ul>
<p>If both of the above conditions are true, then data is collected and sent to the Adjust backend in
the following two circumstances: first, when</p>
<ul class="simple">
<li>Fennec is started on the device <a class="footnote-reference" href="#started" id="id3">[3]</a>.</li>
</ul>
<p>Second, when</p>
<ul class="simple">
<li>the Fennec binary was installed from the Google Play Store; and</li>
<li>the Google Play Store sends the installed Fennec binary an <a class="reference external" href="https://developer.android.com/reference/com/google/android/gms/tagmanager/InstallReferrerReceiver.html">INSTALL_REFERRER Intent</a>, and the
received Intent includes Google Play Store campaign tracking information.  This happens when thea
Google Play Store install is in response to a campaign-specific Google Play Store link.  For
details, see the developer documentation at
<a class="reference external" href="https://developers.google.com/analytics/devguides/collection/android/v4/campaigns">https://developers.google.com/analytics/devguides/collection/android/v4/campaigns</a>.</li>
</ul>
<p>In these two limited circumstances, data is collected and sent to the Adjust backend.</p>
</div>
<div class="section" id="where-does-data-sent-to-the-adjust-backend-go">
<h3>Where does data sent to the Adjust backend go?<a class="headerlink" href="#where-does-data-sent-to-the-adjust-backend-go" title="Permalink to this headline">¶</a></h3>
<p>The Adjust SDK is hard-coded to send data to the endpoint <a class="reference external" href="https://app.adjust.com">https://app.adjust.com</a>.  The endpoint is
defined by <code class="docutils literal"><span class="pre">com.adjust.sdk.Constants.BASE_URL</span></code> at
<a class="reference external" href="https://hg.mozilla.org/mozilla-central/file/f76f02793f7a/mobile/android/thirdparty/com/adjust/sdk/Constants.java#l27">https://hg.mozilla.org/mozilla-central/file/f76f02793f7a/mobile/android/thirdparty/com/adjust/sdk/Constants.java#l27</a>.</p>
<p>The Adjust backend then sends a limited subset of the collected data – limited but sufficient to
uniquely identify the submitting device – to a set of advertising network providers that Mozilla
elects to share the collected data with.  Those advertising networks then confirm or deny that the
identifying information corresponds to a specific advertising campaign performed by Mozilla.</p>
</div>
<div class="section" id="what-data-is-collected-and-sent-to-the-adjust-backend">
<h3>What data is collected and sent to the Adjust backend?<a class="headerlink" href="#what-data-is-collected-and-sent-to-the-adjust-backend" title="Permalink to this headline">¶</a></h3>
<p>The Adjust SDK collects and sends two messages to the Adjust backend.  The messages have the
following parameters:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">V</span><span class="o">/</span><span class="n">Adjust</span>  <span class="p">(</span> <span class="mi">6508</span><span class="p">):</span> <span class="n">Parameters</span><span class="p">:</span>
<span class="n">V</span><span class="o">/</span><span class="n">Adjust</span>  <span class="p">(</span> <span class="mi">6508</span><span class="p">):</span>    <span class="n">screen_format</span>    <span class="n">normal</span>
<span class="n">V</span><span class="o">/</span><span class="n">Adjust</span>  <span class="p">(</span> <span class="mi">6508</span><span class="p">):</span>    <span class="n">device_manufacturer</span> <span class="n">samsung</span>
<span class="n">V</span><span class="o">/</span><span class="n">Adjust</span>  <span class="p">(</span> <span class="mi">6508</span><span class="p">):</span>    <span class="n">session_count</span>    <span class="mi">1</span>
<span class="n">V</span><span class="o">/</span><span class="n">Adjust</span>  <span class="p">(</span> <span class="mi">6508</span><span class="p">):</span>    <span class="n">device_type</span>      <span class="n">phone</span>
<span class="n">V</span><span class="o">/</span><span class="n">Adjust</span>  <span class="p">(</span> <span class="mi">6508</span><span class="p">):</span>    <span class="n">screen_size</span>      <span class="n">normal</span>
<span class="n">V</span><span class="o">/</span><span class="n">Adjust</span>  <span class="p">(</span> <span class="mi">6508</span><span class="p">):</span>    <span class="n">package_name</span>     <span class="n">org</span><span class="o">.</span><span class="n">mozilla</span><span class="o">.</span><span class="n">firefox</span>
<span class="n">V</span><span class="o">/</span><span class="n">Adjust</span>  <span class="p">(</span> <span class="mi">6508</span><span class="p">):</span>    <span class="n">app_version</span>      <span class="mf">39.0</span><span class="n">a1</span>
<span class="n">V</span><span class="o">/</span><span class="n">Adjust</span>  <span class="p">(</span> <span class="mi">6508</span><span class="p">):</span>    <span class="n">android_uuid</span>     <span class="o">&lt;</span><span class="n">guid</span><span class="o">&gt;</span>
<span class="n">V</span><span class="o">/</span><span class="n">Adjust</span>  <span class="p">(</span> <span class="mi">6508</span><span class="p">):</span>    <span class="n">display_width</span>    <span class="mi">720</span>
<span class="n">V</span><span class="o">/</span><span class="n">Adjust</span>  <span class="p">(</span> <span class="mi">6508</span><span class="p">):</span>    <span class="n">country</span>          <span class="n">GB</span>
<span class="n">V</span><span class="o">/</span><span class="n">Adjust</span>  <span class="p">(</span> <span class="mi">6508</span><span class="p">):</span>    <span class="n">os_version</span>       <span class="mi">18</span>
<span class="n">V</span><span class="o">/</span><span class="n">Adjust</span>  <span class="p">(</span> <span class="mi">6508</span><span class="p">):</span>    <span class="n">needs_attribution_data</span> <span class="mi">0</span>
<span class="n">V</span><span class="o">/</span><span class="n">Adjust</span>  <span class="p">(</span> <span class="mi">6508</span><span class="p">):</span>    <span class="n">environment</span>      <span class="n">sandbox</span>
<span class="n">V</span><span class="o">/</span><span class="n">Adjust</span>  <span class="p">(</span> <span class="mi">6508</span><span class="p">):</span>    <span class="n">device_name</span>      <span class="n">Galaxy</span> <span class="n">Nexus</span>
<span class="n">V</span><span class="o">/</span><span class="n">Adjust</span>  <span class="p">(</span> <span class="mi">6508</span><span class="p">):</span>    <span class="n">os_name</span>          <span class="n">android</span>
<span class="n">V</span><span class="o">/</span><span class="n">Adjust</span>  <span class="p">(</span> <span class="mi">6508</span><span class="p">):</span>    <span class="n">tracking_enabled</span> <span class="mi">1</span>
<span class="n">V</span><span class="o">/</span><span class="n">Adjust</span>  <span class="p">(</span> <span class="mi">6508</span><span class="p">):</span>    <span class="n">created_at</span>       <span class="mi">2015</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">24</span><span class="n">T17</span><span class="p">:</span><span class="mi">53</span><span class="p">:</span><span class="mf">38.452</span><span class="n">Z</span><span class="o">-</span><span class="mi">0400</span>
<span class="n">V</span><span class="o">/</span><span class="n">Adjust</span>  <span class="p">(</span> <span class="mi">6508</span><span class="p">):</span>    <span class="n">app_token</span>        <span class="o">&lt;</span><span class="n">private</span><span class="o">&gt;</span>
<span class="n">V</span><span class="o">/</span><span class="n">Adjust</span>  <span class="p">(</span> <span class="mi">6508</span><span class="p">):</span>    <span class="n">screen_density</span>   <span class="n">high</span>
<span class="n">V</span><span class="o">/</span><span class="n">Adjust</span>  <span class="p">(</span> <span class="mi">6508</span><span class="p">):</span>    <span class="n">language</span>         <span class="n">en</span>
<span class="n">V</span><span class="o">/</span><span class="n">Adjust</span>  <span class="p">(</span> <span class="mi">6508</span><span class="p">):</span>    <span class="n">display_height</span>   <span class="mi">1184</span>
<span class="n">V</span><span class="o">/</span><span class="n">Adjust</span>  <span class="p">(</span> <span class="mi">6508</span><span class="p">):</span>    <span class="n">gps_adid</span>         <span class="o">&lt;</span><span class="n">guid</span><span class="o">&gt;</span>

<span class="n">V</span><span class="o">/</span><span class="n">Adjust</span>  <span class="p">(</span> <span class="mi">6508</span><span class="p">):</span> <span class="n">Parameters</span><span class="p">:</span>
<span class="n">V</span><span class="o">/</span><span class="n">Adjust</span>  <span class="p">(</span> <span class="mi">6508</span><span class="p">):</span>    <span class="n">needs_attribution_data</span> <span class="mi">0</span>
<span class="n">V</span><span class="o">/</span><span class="n">Adjust</span>  <span class="p">(</span> <span class="mi">6508</span><span class="p">):</span>    <span class="n">app_token</span>        <span class="o">&lt;</span><span class="n">private</span><span class="o">&gt;</span>
<span class="n">V</span><span class="o">/</span><span class="n">Adjust</span>  <span class="p">(</span> <span class="mi">6508</span><span class="p">):</span>    <span class="n">environment</span>      <span class="n">production</span>
<span class="n">V</span><span class="o">/</span><span class="n">Adjust</span>  <span class="p">(</span> <span class="mi">6508</span><span class="p">):</span>    <span class="n">android_uuid</span>     <span class="o">&lt;</span><span class="n">guid</span><span class="o">&gt;</span>
<span class="n">V</span><span class="o">/</span><span class="n">Adjust</span>  <span class="p">(</span> <span class="mi">6508</span><span class="p">):</span>    <span class="n">tracking_enabled</span> <span class="mi">1</span>
<span class="n">V</span><span class="o">/</span><span class="n">Adjust</span>  <span class="p">(</span> <span class="mi">6508</span><span class="p">):</span>    <span class="n">gps_adid</span>         <span class="o">&lt;</span><span class="n">guid</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>The available parameters (including ones not exposed to Mozilla) are documented at
<a class="reference external" href="https://partners.adjust.com/placeholders/">https://partners.adjust.com/placeholders/</a>.</p>
<div class="section" id="notes-on-what-data-is-collected">
<h4>Notes on what data is collected<a class="headerlink" href="#notes-on-what-data-is-collected" title="Permalink to this headline">¶</a></h4>
<p>The <em>android_uuid</em> uniquely identifies the device.</p>
<p>The <em>gps_adid</em> is a Google Advertising ID.  It is capable of uniquely identifying a device to any
advertiser, across all applications.  If a Google Advertising ID is not available, Adjust may fall
back to an Android ID, or, as a last resort, the device’s WiFi MAC address.</p>
<p>The <em>tracking_enabled</em> flag is only used to allow or disallow contextual advertising to be sent to a
user. It can be, and is, ignored for general install tracking of the type Mozilla is using the
Adjust SDK for.  (This flag might be used by consumers using the Adjust SDK to provide in-App
advertising.)</p>
<p>It is not clear how much entropy their is in the set of per-device parameters that do not
<em>explicitly</em> uniquely identify the device.  That is, it is not known if the device parameters are
likely to uniquely fingerprint the device, in the way that user agent capabilities are likely to
uniquely fingerprint the user.</p>
</div>
</div>
</div>
<div class="section" id="technical-notes">
<h2>Technical notes<a class="headerlink" href="#technical-notes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="build-flags-controlling-the-adjust-sdk-integration">
<h3>Build flags controlling the Adjust SDK integration<a class="headerlink" href="#build-flags-controlling-the-adjust-sdk-integration" title="Permalink to this headline">¶</a></h3>
<p>Add the following to your mozconfig to compile with the Adjust SDK:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">MOZ_INSTALL_TRACKING</span><span class="o">=</span><span class="mi">1</span>
<span class="n">export</span> <span class="n">MOZ_NATIVE_DEVICES</span><span class="o">=</span><span class="mi">1</span>
<span class="n">ac_add_options</span> <span class="o">--</span><span class="k">with</span><span class="o">-</span><span class="n">adjust</span><span class="o">-</span><span class="n">sdk</span><span class="o">-</span><span class="n">keyfile</span><span class="o">=</span><span class="s2">&quot;$topsrcdir/mobile/android/base/adjust-sdk-sandbox.token&quot;</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">MOZ_NATIVE_DEVICES</span></code> is required to provide some Google Play Services dependencies.</p>
<p>No trace of the Adjust SDK should be present in Fennec if
<code class="docutils literal"><span class="pre">MOZ_INSTALL_TRACKING</span></code> is not defined.</p>
<p>Access to the Adjust backend is controlled by a private App-specific
token. Fennec’s token is managed by Release Engineering and should not
be exposed if at all possible; for example, it should <em>not</em> leak to build
logs.  The value of the token is read from the file specified using the
<code class="docutils literal"><span class="pre">configure</span></code> flag <code class="docutils literal"><span class="pre">--with-adjust-sdk-keyfile=KEYFILE</span></code> and stored in
the build variable <code class="docutils literal"><span class="pre">MOZ_ADJUST_SDK_KEY</span></code>. The mozconfig specified above
defaults to submitting data to a special Adjust sandbox allowing a
developer to test Adjust without submitting false data to our backend.</p>
<p>We throw an assertion if <code class="docutils literal"><span class="pre">MOZ_INSTALL_TRACKING</span></code> is specified but
<code class="docutils literal"><span class="pre">--with-adjust-sdk-keyfile</span></code> is not to ensure our builders have a proper
adjust token for release and beta builds.  It’s great to catch some
errors at compile-time rather than in release. That being said, ideally
we’d specify a default <code class="docutils literal"><span class="pre">--with-adjust-sdk-keyfile</span></code> for developer builds
but I don’t know how to do that.</p>
</div>
<div class="section" id="technical-notes-on-the-adjust-sdk-integration">
<h3>Technical notes on the Adjust SDK integration<a class="headerlink" href="#technical-notes-on-the-adjust-sdk-integration" title="Permalink to this headline">¶</a></h3>
<p>The <em>Adjust install tracking SDK</em> is a pure-Java library that is conditionally compiled into Fennec.
It’s not trivial to integrate such conditional feature libraries into Fennec without pre-processing.
To minimize such pre-processing, we define a trivial <code class="docutils literal"><span class="pre">AdjustHelperInterface</span></code> and define two
implementations: the real <code class="docutils literal"><span class="pre">AdjustHelper</span></code>, which requires the Adjust SDK, and a no-op
<code class="docutils literal"><span class="pre">StubAdjustHelper</span></code>, which has no additional requirements.  We use the existing pre-processed
<code class="docutils literal"><span class="pre">AppConstants.java.in</span></code> to switch, at build-time, between the two implementations.</p>
</div>
<div class="section" id="notes-and-links">
<h3>Notes and links<a class="headerlink" href="#notes-and-links" title="Permalink to this headline">¶</a></h3>
<table class="docutils footnote" frame="void" id="official" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>Data is not sent for builds not produced by Mozilla: this would include
redistributors such as the Palemoon project.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="channel" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[2]</a></td><td>Data is not sent for Aurora, Nightly, or custom builds.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="started" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[3]</a></td><td><em>Started</em> means more than just when the user taps the Fennec icon or otherwise causes
the Fennec user interface to appear directly.  It includes, for example, when a Fennec service
(like the Update Service, or Background Sync), starts and Fennec was not previously running on the
device.  See <a class="reference external" href="http://developer.android.com/reference/android/app/Application.html#onCreate%28%29">http://developer.android.com/reference/android/app/Application.html#onCreate%28%29</a>
for details.</td></tr>
</tbody>
</table>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="mma.html" class="btn btn-neutral float-right" title="MMA Mobile Marketing Automation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="downloadcontenttelemetry.html" class="btn btn-neutral" title="Downloadable content (DLC) UI Telemetry" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright .

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'59.0a1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>