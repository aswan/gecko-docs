

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>mach package &mdash; Mozilla Source Tree Docs 59.0a1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Mozilla Source Tree Docs 59.0a1 documentation" href="../index.html"/>
        <link rel="next" title="mach.commands package" href="mach.commands.html"/>
        <link rel="prev" title="Flake8" href="../tools/lint/linters/flake8.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Mozilla Source Tree Docs
          

          
          </a>

          
            
            
              <div class="version">
                59.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../browser/base/sslerrorreport/index.html">SSL Error Reporting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../browser/browser/index.html">Firefox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../browser/experiments/experiments/index.html">Telemetry Experiments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../build/buildsystem/index.html">Build System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dom/bindings/webidl/index.html">WebIDL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gfx/gfx/index.html">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mobile/android/fennec/index.html">Firefox for Android</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mobile/android/fennec/index.html#indices-and-tables">Indices and tables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mozbase/index.html">mozbase</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mozbase/index.html#indices-and-tables">Indices and tables</a></li>
<li class="toctree-l1"><a class="reference internal" href="mach/index.html">mach</a></li>
<li class="toctree-l1"><a class="reference internal" href="../taskcluster/taskcluster/index.html">TaskCluster Task-Graph Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing/geckodriver/geckodriver/index.html">geckodriver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing/marionette/marionette/index.html">Marionette</a></li>
<li class="toctree-l1"><a class="reference internal" href="../toolkit/components/crashes/crash-manager/index.html">Crash Manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../toolkit/components/extensions/webextensions/index.html">WebExtensions API Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../toolkit/components/payments/docs/index.html">WebPayments UI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../toolkit/components/telemetry/telemetry/index.html">Telemetry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../toolkit/components/url-classifier/url-classifier/index.html">URL Classifier</a></li>
<li class="toctree-l1"><a class="reference internal" href="../toolkit/crashreporter/crashreporter/index.html">Crash Reporter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../toolkit/modules/subprocess/toolkit_modules/subprocess/index.html">Supbrocess Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../toolkit/modules/toolkit_modules/index.html">Toolkit modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../toolkit/mozapps/extensions/addon-manager/index.html">Add-on Manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/compare-locales/index.html">Localization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/lint/index.html">Linting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/lint/index.html#indices-and-tables">Indices and tables</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">mach package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#subpackages">Subpackages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="mach.commands.html">mach.commands package</a></li>
<li class="toctree-l3"><a class="reference internal" href="mach.mixin.html">mach.mixin package</a></li>
<li class="toctree-l3"><a class="reference internal" href="mach.test.html">mach.test package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-mach.base">mach.base module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-mach.config">mach.config module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-mach.decorators">mach.decorators module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-mach.dispatcher">mach.dispatcher module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-mach.logging">mach.logging module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-mach.main">mach.main module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-mach.registrar">mach.registrar module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-mach.terminal">mach.terminal module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-mach">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="mozbuild.html">mozbuild package</a></li>
<li class="toctree-l1"><a class="reference internal" href="mozlint.html">mozlint package</a></li>
<li class="toctree-l1"><a class="reference internal" href="mozpack.html">mozpack package</a></li>
<li class="toctree-l1"><a class="reference internal" href="mozversioncontrol.html">mozversioncontrol package</a></li>
<li class="toctree-l1"><a class="reference internal" href="mozwebidlcodegen.html">mozwebidlcodegen package</a></li>
<li class="toctree-l1"><a class="reference internal" href="taskgraph.html">taskgraph package</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Mozilla Source Tree Docs</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>mach package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/python/mach.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="mach-package">
<h1>mach package<a class="headerlink" href="#mach-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="mach.commands.html">mach.commands package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="mach.commands.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="mach.commands.html#mach-commands-commandinfo-module">mach.commands.commandinfo module</a></li>
<li class="toctree-l2"><a class="reference internal" href="mach.commands.html#mach-commands-settings-module">mach.commands.settings module</a></li>
<li class="toctree-l2"><a class="reference internal" href="mach.commands.html#module-mach.commands">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="mach.mixin.html">mach.mixin package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="mach.mixin.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="mach.mixin.html#module-mach.mixin.logging">mach.mixin.logging module</a></li>
<li class="toctree-l2"><a class="reference internal" href="mach.mixin.html#module-mach.mixin.process">mach.mixin.process module</a></li>
<li class="toctree-l2"><a class="reference internal" href="mach.mixin.html#module-mach.mixin">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="mach.test.html">mach.test package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="mach.test.html#subpackages">Subpackages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="mach.test.providers.html">mach.test.providers package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="mach.test.providers.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="mach.test.providers.html#module-mach.test.providers.basic">mach.test.providers.basic module</a></li>
<li class="toctree-l4"><a class="reference internal" href="mach.test.providers.html#module-mach.test.providers.conditions">mach.test.providers.conditions module</a></li>
<li class="toctree-l4"><a class="reference internal" href="mach.test.providers.html#mach-test-providers-conditions-invalid-module">mach.test.providers.conditions_invalid module</a></li>
<li class="toctree-l4"><a class="reference internal" href="mach.test.providers.html#module-mach.test.providers.throw">mach.test.providers.throw module</a></li>
<li class="toctree-l4"><a class="reference internal" href="mach.test.providers.html#module-mach.test.providers.throw2">mach.test.providers.throw2 module</a></li>
<li class="toctree-l4"><a class="reference internal" href="mach.test.providers.html#module-mach.test.providers">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="mach.test.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="mach.test.html#module-mach.test.common">mach.test.common module</a></li>
<li class="toctree-l2"><a class="reference internal" href="mach.test.html#module-mach.test.test_conditions">mach.test.test_conditions module</a></li>
<li class="toctree-l2"><a class="reference internal" href="mach.test.html#module-mach.test.test_config">mach.test.test_config module</a></li>
<li class="toctree-l2"><a class="reference internal" href="mach.test.html#module-mach.test.test_dispatcher">mach.test.test_dispatcher module</a></li>
<li class="toctree-l2"><a class="reference internal" href="mach.test.html#module-mach.test.test_entry_point">mach.test.test_entry_point module</a></li>
<li class="toctree-l2"><a class="reference internal" href="mach.test.html#module-mach.test.test_error_output">mach.test.test_error_output module</a></li>
<li class="toctree-l2"><a class="reference internal" href="mach.test.html#module-mach.test.test_logger">mach.test.test_logger module</a></li>
<li class="toctree-l2"><a class="reference internal" href="mach.test.html#module-mach.test">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-mach.base">
<span id="mach-base-module"></span><h2>mach.base module<a class="headerlink" href="#module-mach.base" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="mach.base.CommandContext">
<em class="property">class </em><code class="descclassname">mach.base.</code><code class="descname">CommandContext</code><span class="sig-paren">(</span><em>cwd=None</em>, <em>settings=None</em>, <em>log_manager=None</em>, <em>commands=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.base.CommandContext" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Holds run-time state so it can easily be passed to command providers.</p>
</dd></dl>

<dl class="exception">
<dt id="mach.base.FailedCommandError">
<em class="property">exception </em><code class="descclassname">mach.base.</code><code class="descname">FailedCommandError</code><span class="sig-paren">(</span><em>message</em>, <em>exit_code=1</em>, <em>reason=u''</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.base.FailedCommandError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">exceptions.Exception</span></code></p>
<p>Raised by commands to signal a handled failure to be printed by mach</p>
<p>When caught by mach a FailedCommandError will print message and exit
with ‘’exit_code’‘. The optional ‘’reason’’ is a string in cases where
other scripts may wish to handle the exception, though this is generally
intended to communicate failure to mach.</p>
</dd></dl>

<dl class="exception">
<dt id="mach.base.MachError">
<em class="property">exception </em><code class="descclassname">mach.base.</code><code class="descname">MachError</code><a class="headerlink" href="#mach.base.MachError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">exceptions.Exception</span></code></p>
<p>Base class for all errors raised by mach itself.</p>
</dd></dl>

<dl class="exception">
<dt id="mach.base.MissingFileError">
<em class="property">exception </em><code class="descclassname">mach.base.</code><code class="descname">MissingFileError</code><a class="headerlink" href="#mach.base.MissingFileError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#mach.base.MachError" title="mach.base.MachError"><code class="xref py py-class docutils literal"><span class="pre">mach.base.MachError</span></code></a></p>
<p>Attempted to load a mach commands file that doesn’t exist.</p>
</dd></dl>

<dl class="exception">
<dt id="mach.base.NoCommandError">
<em class="property">exception </em><code class="descclassname">mach.base.</code><code class="descname">NoCommandError</code><a class="headerlink" href="#mach.base.NoCommandError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#mach.base.MachError" title="mach.base.MachError"><code class="xref py py-class docutils literal"><span class="pre">mach.base.MachError</span></code></a></p>
<p>No command was passed into mach.</p>
</dd></dl>

<dl class="exception">
<dt id="mach.base.UnknownCommandError">
<em class="property">exception </em><code class="descclassname">mach.base.</code><code class="descname">UnknownCommandError</code><span class="sig-paren">(</span><em>command</em>, <em>verb</em>, <em>suggested_commands=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.base.UnknownCommandError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#mach.base.MachError" title="mach.base.MachError"><code class="xref py py-class docutils literal"><span class="pre">mach.base.MachError</span></code></a></p>
<p>Raised when we attempted to execute an unknown command.</p>
</dd></dl>

<dl class="exception">
<dt id="mach.base.UnrecognizedArgumentError">
<em class="property">exception </em><code class="descclassname">mach.base.</code><code class="descname">UnrecognizedArgumentError</code><span class="sig-paren">(</span><em>command</em>, <em>arguments</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.base.UnrecognizedArgumentError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#mach.base.MachError" title="mach.base.MachError"><code class="xref py py-class docutils literal"><span class="pre">mach.base.MachError</span></code></a></p>
<p>Raised when an unknown argument is passed to mach.</p>
</dd></dl>

</div>
<div class="section" id="module-mach.config">
<span id="mach-config-module"></span><h2>mach.config module<a class="headerlink" href="#module-mach.config" title="Permalink to this headline">¶</a></h2>
<p>This file defines classes for representing config data/settings.</p>
<p>Config data is modeled as key-value pairs. Keys are grouped together into named
sections. Individual config settings (options) have metadata associated with
them. This metadata includes type, default value, valid values, etc.</p>
<p>The main interface to config data is the ConfigSettings class. 1 or more
ConfigProvider classes are associated with ConfigSettings and define what
settings are available.</p>
<dl class="class">
<dt id="mach.config.BooleanType">
<em class="property">class </em><code class="descclassname">mach.config.</code><code class="descname">BooleanType</code><a class="headerlink" href="#mach.config.BooleanType" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#mach.config.ConfigType" title="mach.config.ConfigType"><code class="xref py py-class docutils literal"><span class="pre">mach.config.ConfigType</span></code></a></p>
<dl class="staticmethod">
<dt id="mach.config.BooleanType.from_config">
<em class="property">static </em><code class="descname">from_config</code><span class="sig-paren">(</span><em>config</em>, <em>section</em>, <em>option</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.config.BooleanType.from_config" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="staticmethod">
<dt id="mach.config.BooleanType.to_config">
<em class="property">static </em><code class="descname">to_config</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.config.BooleanType.to_config" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="staticmethod">
<dt id="mach.config.BooleanType.validate">
<em class="property">static </em><code class="descname">validate</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.config.BooleanType.validate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="exception">
<dt id="mach.config.ConfigException">
<em class="property">exception </em><code class="descclassname">mach.config.</code><code class="descname">ConfigException</code><a class="headerlink" href="#mach.config.ConfigException" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">exceptions.Exception</span></code></p>
</dd></dl>

<dl class="class">
<dt id="mach.config.ConfigSettings">
<em class="property">class </em><code class="descclassname">mach.config.</code><code class="descname">ConfigSettings</code><a class="headerlink" href="#mach.config.ConfigSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">_abcoll.Mapping</span></code></p>
<p>Interface for configuration settings.</p>
<p>This is the main interface to the configuration.</p>
<p>A configuration is a collection of sections. Each section contains
key-value pairs.</p>
<p>When an instance is created, the caller first registers ConfigProvider
instances with it. This tells the ConfigSettings what individual settings
are available and defines extra metadata associated with those settings.
This is used for validation, etc.</p>
<p>Once ConfigProvider instances are registered, a config is populated. It can
be loaded from files or populated by hand.</p>
<p>ConfigSettings instances are accessed like dictionaries or by using
attributes. e.g. the section “foo” is accessed through either
settings.foo or settings[‘foo’].</p>
<p>Sections are modeled by the ConfigSection class which is defined inside
this one. They look just like dicts or classes with attributes. To access
the “bar” option in the “foo” section:</p>
<blockquote>
<div>value = settings.foo.bar
value = settings[‘foo’][‘bar’]
value = settings.foo[‘bar’]</div></blockquote>
<p>Assignment is similar:</p>
<blockquote>
<div>settings.foo.bar = value
settings[‘foo’][‘bar’] = value
settings[‘foo’].bar = value</div></blockquote>
<p>You can even delete user-assigned values:</p>
<blockquote>
<div>del settings.foo.bar
del settings[‘foo’][‘bar’]</div></blockquote>
<p>If there is a default, it will be returned.</p>
<p>When settings are mutated, they are validated against the registered
providers. Setting unknown settings or setting values to illegal values
will result in exceptions being raised.</p>
<dl class="class">
<dt id="mach.config.ConfigSettings.ConfigSection">
<em class="property">class </em><code class="descname">ConfigSection</code><span class="sig-paren">(</span><em>config</em>, <em>name</em>, <em>settings</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.config.ConfigSettings.ConfigSection" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">_abcoll.MutableMapping</span></code>, <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Represents an individual config section.</p>
<dl class="method">
<dt id="mach.config.ConfigSettings.ConfigSection.get_meta">
<code class="descname">get_meta</code><span class="sig-paren">(</span><em>option</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.config.ConfigSettings.ConfigSection.get_meta" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="mach.config.ConfigSettings.ConfigSection.options">
<code class="descname">options</code><a class="headerlink" href="#mach.config.ConfigSettings.ConfigSection.options" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="method">
<dt id="mach.config.ConfigSettings.load_file">
<code class="descname">load_file</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.config.ConfigSettings.load_file" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mach.config.ConfigSettings.load_files">
<code class="descname">load_files</code><span class="sig-paren">(</span><em>filenames</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.config.ConfigSettings.load_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a config from files specified by their paths.</p>
<p>Files are loaded in the order given. Subsequent files will overwrite
values from previous files. If a file does not exist, it will be
ignored.</p>
</dd></dl>

<dl class="method">
<dt id="mach.config.ConfigSettings.load_fps">
<code class="descname">load_fps</code><span class="sig-paren">(</span><em>fps</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.config.ConfigSettings.load_fps" title="Permalink to this definition">¶</a></dt>
<dd><p>Load config data by reading file objects.</p>
</dd></dl>

<dl class="method">
<dt id="mach.config.ConfigSettings.register_provider">
<code class="descname">register_provider</code><span class="sig-paren">(</span><em>provider</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.config.ConfigSettings.register_provider" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a SettingsProvider with this settings interface.</p>
</dd></dl>

<dl class="method">
<dt id="mach.config.ConfigSettings.write">
<code class="descname">write</code><span class="sig-paren">(</span><em>fh</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.config.ConfigSettings.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the config to a file object.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mach.config.ConfigType">
<em class="property">class </em><code class="descclassname">mach.config.</code><code class="descname">ConfigType</code><a class="headerlink" href="#mach.config.ConfigType" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Abstract base class for config values.</p>
<dl class="staticmethod">
<dt id="mach.config.ConfigType.from_config">
<em class="property">static </em><code class="descname">from_config</code><span class="sig-paren">(</span><em>config</em>, <em>section</em>, <em>option</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.config.ConfigType.from_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Obtain the value of this type from a RawConfigParser.</p>
<p>Receives a RawConfigParser instance, a str section name, and the str
option in that section to retrieve.</p>
<p>The implementation may assume the option exists in the RawConfigParser
instance.</p>
<p>Implementations are not expected to validate the value. But, they
should return the appropriate Python type.</p>
</dd></dl>

<dl class="staticmethod">
<dt id="mach.config.ConfigType.to_config">
<em class="property">static </em><code class="descname">to_config</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.config.ConfigType.to_config" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="staticmethod">
<dt id="mach.config.ConfigType.validate">
<em class="property">static </em><code class="descname">validate</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.config.ConfigType.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Validates a Python value conforms to this type.</p>
<p>Raises a TypeError or ValueError if it doesn’t conform. Does not do
anything if the value is valid.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mach.config.DefaultValue">
<em class="property">class </em><code class="descclassname">mach.config.</code><code class="descname">DefaultValue</code><a class="headerlink" href="#mach.config.DefaultValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
</dd></dl>

<dl class="class">
<dt id="mach.config.IntegerType">
<em class="property">class </em><code class="descclassname">mach.config.</code><code class="descname">IntegerType</code><a class="headerlink" href="#mach.config.IntegerType" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#mach.config.ConfigType" title="mach.config.ConfigType"><code class="xref py py-class docutils literal"><span class="pre">mach.config.ConfigType</span></code></a></p>
<dl class="staticmethod">
<dt id="mach.config.IntegerType.from_config">
<em class="property">static </em><code class="descname">from_config</code><span class="sig-paren">(</span><em>config</em>, <em>section</em>, <em>option</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.config.IntegerType.from_config" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="staticmethod">
<dt id="mach.config.IntegerType.validate">
<em class="property">static </em><code class="descname">validate</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.config.IntegerType.validate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="mach.config.PathType">
<em class="property">class </em><code class="descclassname">mach.config.</code><code class="descname">PathType</code><a class="headerlink" href="#mach.config.PathType" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#mach.config.StringType" title="mach.config.StringType"><code class="xref py py-class docutils literal"><span class="pre">mach.config.StringType</span></code></a></p>
<dl class="staticmethod">
<dt id="mach.config.PathType.from_config">
<em class="property">static </em><code class="descname">from_config</code><span class="sig-paren">(</span><em>config</em>, <em>section</em>, <em>option</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.config.PathType.from_config" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="staticmethod">
<dt id="mach.config.PathType.validate">
<em class="property">static </em><code class="descname">validate</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.config.PathType.validate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="mach.config.PositiveIntegerType">
<em class="property">class </em><code class="descclassname">mach.config.</code><code class="descname">PositiveIntegerType</code><a class="headerlink" href="#mach.config.PositiveIntegerType" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#mach.config.IntegerType" title="mach.config.IntegerType"><code class="xref py py-class docutils literal"><span class="pre">mach.config.IntegerType</span></code></a></p>
<dl class="staticmethod">
<dt id="mach.config.PositiveIntegerType.validate">
<em class="property">static </em><code class="descname">validate</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.config.PositiveIntegerType.validate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="mach.config.StringType">
<em class="property">class </em><code class="descclassname">mach.config.</code><code class="descname">StringType</code><a class="headerlink" href="#mach.config.StringType" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#mach.config.ConfigType" title="mach.config.ConfigType"><code class="xref py py-class docutils literal"><span class="pre">mach.config.ConfigType</span></code></a></p>
<dl class="staticmethod">
<dt id="mach.config.StringType.from_config">
<em class="property">static </em><code class="descname">from_config</code><span class="sig-paren">(</span><em>config</em>, <em>section</em>, <em>option</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.config.StringType.from_config" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="staticmethod">
<dt id="mach.config.StringType.validate">
<em class="property">static </em><code class="descname">validate</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.config.StringType.validate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="mach.config.reraise_attribute_error">
<code class="descclassname">mach.config.</code><code class="descname">reraise_attribute_error</code><span class="sig-paren">(</span><em>func</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.config.reraise_attribute_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Used to make sure __getattr__ wrappers around __getitem__
raise AttributeError instead of KeyError.</p>
</dd></dl>

</div>
<div class="section" id="module-mach.decorators">
<span id="mach-decorators-module"></span><h2>mach.decorators module<a class="headerlink" href="#module-mach.decorators" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="mach.decorators.Command">
<em class="property">class </em><code class="descclassname">mach.decorators.</code><code class="descname">Command</code><span class="sig-paren">(</span><em>name</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.decorators.Command" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Decorator for functions or methods that provide a mach command.</p>
<p>The decorator accepts arguments that define basic attributes of the
command. The following arguments are recognized:</p>
<blockquote>
<div><dl class="docutils">
<dt>category – The string category to which this command belongs. Mach’s</dt>
<dd>help will group commands by category.</dd>
</dl>
<p>description – A brief description of what the command does.</p>
<dl class="docutils">
<dt>parser – an optional argparse.ArgumentParser instance or callable</dt>
<dd>that returns an argparse.ArgumentParser instance to use as the
basis for the command arguments.</dd>
</dl>
</div></blockquote>
<p>For example:</p>
<blockquote>
<div><p>&#64;Command(‘foo’, category=’misc’, description=’Run the foo action’)
def foo(self):</p>
<blockquote>
<div>pass</div></blockquote>
</div></blockquote>
</dd></dl>

<dl class="class">
<dt id="mach.decorators.CommandArgument">
<em class="property">class </em><code class="descclassname">mach.decorators.</code><code class="descname">CommandArgument</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.decorators.CommandArgument" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Decorator for additional arguments to mach subcommands.</p>
<p>This decorator should be used to add arguments to mach commands. Arguments
to the decorator are proxied to ArgumentParser.add_argument().</p>
<p>For example:</p>
<blockquote>
<div><p>&#64;Command(‘foo’, help=’Run the foo action’)
&#64;CommandArgument(‘-b’, ‘–bar’, action=’store_true’, default=False,</p>
<blockquote>
<div>help=’Enable bar mode.’)</div></blockquote>
<dl class="docutils">
<dt>def foo(self):</dt>
<dd>pass</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="class">
<dt id="mach.decorators.CommandArgumentGroup">
<em class="property">class </em><code class="descclassname">mach.decorators.</code><code class="descname">CommandArgumentGroup</code><span class="sig-paren">(</span><em>group_name</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.decorators.CommandArgumentGroup" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Decorator for additional argument groups to mach commands.</p>
<p>This decorator should be used to add arguments groups to mach commands.
Arguments to the decorator are proxied to
ArgumentParser.add_argument_group().</p>
<p>For example:</p>
<blockquote>
<div><p>&#64;Command(‘foo’, helps=’Run the foo action’)
&#64;CommandArgumentGroup(‘group1’)
&#64;CommandArgument(‘-b’, ‘–bar’, group=’group1’, action=’store_true’,</p>
<blockquote>
<div>default=False, help=’Enable bar mode.’)</div></blockquote>
<dl class="docutils">
<dt>def foo(self):</dt>
<dd>pass</dd>
</dl>
</div></blockquote>
<p>The name should be chosen so that it makes sense as part of the phrase
‘Command Arguments for &lt;name&gt;’ because that’s how it will be shown in the
help message.</p>
</dd></dl>

<dl class="function">
<dt id="mach.decorators.CommandProvider">
<code class="descclassname">mach.decorators.</code><code class="descname">CommandProvider</code><span class="sig-paren">(</span><em>cls</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.decorators.CommandProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Class decorator to denote that it provides subcommands for Mach.</p>
<p>When this decorator is present, mach looks for commands being defined by
methods inside the class.</p>
</dd></dl>

<dl class="function">
<dt id="mach.decorators.SettingsProvider">
<code class="descclassname">mach.decorators.</code><code class="descname">SettingsProvider</code><span class="sig-paren">(</span><em>cls</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.decorators.SettingsProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Class decorator to denote that this class provides Mach settings.</p>
<p>When this decorator is encountered, the underlying class will automatically
be registered with the Mach registrar and will (likely) be hooked up to the
mach driver.</p>
</dd></dl>

<dl class="class">
<dt id="mach.decorators.SubCommand">
<em class="property">class </em><code class="descclassname">mach.decorators.</code><code class="descname">SubCommand</code><span class="sig-paren">(</span><em>command</em>, <em>subcommand</em>, <em>description=None</em>, <em>parser=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.decorators.SubCommand" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Decorator for functions or methods that provide a sub-command.</p>
<p>Mach commands can have sub-commands. e.g. <code class="docutils literal"><span class="pre">mach</span> <span class="pre">command</span> <span class="pre">foo</span></code> or
<code class="docutils literal"><span class="pre">mach</span> <span class="pre">command</span> <span class="pre">bar</span></code>. Each sub-command has its own parser and is
effectively its own mach command.</p>
<p>The decorator accepts arguments that define basic attributes of the
sub command:</p>
<blockquote>
<div><p>command – The string of the command this sub command should be
attached to.</p>
<p>subcommand – The string name of the sub command to register.</p>
<p>description – A textual description for this sub command.</p>
</div></blockquote>
</dd></dl>

</div>
<div class="section" id="module-mach.dispatcher">
<span id="mach-dispatcher-module"></span><h2>mach.dispatcher module<a class="headerlink" href="#module-mach.dispatcher" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="mach.dispatcher.CommandAction">
<em class="property">class </em><code class="descclassname">mach.dispatcher.</code><code class="descname">CommandAction</code><span class="sig-paren">(</span><em>option_strings</em>, <em>dest</em>, <em>required=True</em>, <em>default=None</em>, <em>registrar=None</em>, <em>context=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.dispatcher.CommandAction" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">argparse.Action</span></code></p>
<p>An argparse action that handles mach commands.</p>
<p>This class is essentially a reimplementation of argparse’s sub-parsers
feature. We first tried to use sub-parsers. However, they were missing
features like grouping of commands (<a class="reference external" href="http://bugs.python.org/issue14037">http://bugs.python.org/issue14037</a>).</p>
<p>The way this works involves light magic and a partial understanding of how
argparse works.</p>
<p>Arguments registered with an argparse.ArgumentParser have an action
associated with them. An action is essentially a class that when called
does something with the encountered argument(s). This class is one of those
action classes.</p>
<p>An instance of this class is created doing something like:</p>
<blockquote>
<div>parser.add_argument(‘command’, action=CommandAction, registrar=r)</div></blockquote>
<p>Note that a mach.registrar.Registrar instance is passed in. The Registrar
holds information on all the mach commands that have been registered.</p>
<p>When this argument is registered with the ArgumentParser, an instance of
this class is instantiated. One of the subtle but important things it does
is tell the argument parser that it’s interested in <em>all</em> of the remaining
program arguments. So, when the ArgumentParser calls this action, we will
receive the command name plus all of its arguments.</p>
<p>For more, read the docs in __call__.</p>
</dd></dl>

<dl class="class">
<dt id="mach.dispatcher.CommandFormatter">
<em class="property">class </em><code class="descclassname">mach.dispatcher.</code><code class="descname">CommandFormatter</code><span class="sig-paren">(</span><em>prog</em>, <em>indent_increment=2</em>, <em>max_help_position=24</em>, <em>width=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.dispatcher.CommandFormatter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">argparse.HelpFormatter</span></code></p>
<p>Custom formatter to format just a subcommand.</p>
<dl class="method">
<dt id="mach.dispatcher.CommandFormatter.add_usage">
<code class="descname">add_usage</code><span class="sig-paren">(</span><em>*args</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.dispatcher.CommandFormatter.add_usage" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="mach.dispatcher.DispatchSettings">
<em class="property">class </em><code class="descclassname">mach.dispatcher.</code><code class="descname">DispatchSettings</code><a class="headerlink" href="#mach.dispatcher.DispatchSettings" title="Permalink to this definition">¶</a></dt>
<dd><dl class="attribute">
<dt id="mach.dispatcher.DispatchSettings.config_settings">
<code class="descname">config_settings</code><em class="property"> = [(u'alias.*', u'string', u'Create a command alias of the form `&lt;alias&gt;=&lt;command&gt; &lt;args&gt;`.\nAliases can also be used to set default arguments:\n&lt;command&gt;=&lt;command&gt; &lt;args&gt;')]</em><a class="headerlink" href="#mach.dispatcher.DispatchSettings.config_settings" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="mach.dispatcher.NoUsageFormatter">
<em class="property">class </em><code class="descclassname">mach.dispatcher.</code><code class="descname">NoUsageFormatter</code><span class="sig-paren">(</span><em>prog</em>, <em>indent_increment=2</em>, <em>max_help_position=24</em>, <em>width=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.dispatcher.NoUsageFormatter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">argparse.HelpFormatter</span></code></p>
</dd></dl>

<dl class="function">
<dt id="mach.dispatcher.format_docstring">
<code class="descclassname">mach.dispatcher.</code><code class="descname">format_docstring</code><span class="sig-paren">(</span><em>docstring</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.dispatcher.format_docstring" title="Permalink to this definition">¶</a></dt>
<dd><p>Format a raw docstring into something suitable for presentation.</p>
<p>This function is based on the example function in PEP-0257.</p>
</dd></dl>

</div>
<div class="section" id="module-mach.logging">
<span id="mach-logging-module"></span><h2>mach.logging module<a class="headerlink" href="#module-mach.logging" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="mach.logging.ConvertToStructuredFilter">
<em class="property">class </em><code class="descclassname">mach.logging.</code><code class="descname">ConvertToStructuredFilter</code><span class="sig-paren">(</span><em>name=''</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.logging.ConvertToStructuredFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">logging.Filter</span></code></p>
<p>Filter that converts unstructured records into structured ones.</p>
<dl class="method">
<dt id="mach.logging.ConvertToStructuredFilter.filter">
<code class="descname">filter</code><span class="sig-paren">(</span><em>record</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.logging.ConvertToStructuredFilter.filter" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="mach.logging.LoggingManager">
<em class="property">class </em><code class="descclassname">mach.logging.</code><code class="descname">LoggingManager</code><a class="headerlink" href="#mach.logging.LoggingManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Holds and controls global logging state.</p>
<p>An application should instantiate one of these and configure it as needed.</p>
<p>This class provides a mechanism to configure the output of logging data
both from mach and from the overall logging system (e.g. from other
modules).</p>
<dl class="method">
<dt id="mach.logging.LoggingManager.add_json_handler">
<code class="descname">add_json_handler</code><span class="sig-paren">(</span><em>fh</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.logging.LoggingManager.add_json_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>Enable JSON logging on the specified file object.</p>
</dd></dl>

<dl class="method">
<dt id="mach.logging.LoggingManager.add_terminal_logging">
<code class="descname">add_terminal_logging</code><span class="sig-paren">(</span><em>fh=&lt;open file '&lt;stdout&gt;'</em>, <em>mode 'w'&gt;</em>, <em>level=20</em>, <em>write_interval=False</em>, <em>write_times=True</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.logging.LoggingManager.add_terminal_logging" title="Permalink to this definition">¶</a></dt>
<dd><p>Enable logging to the terminal.</p>
</dd></dl>

<dl class="method">
<dt id="mach.logging.LoggingManager.disable_unstructured">
<code class="descname">disable_unstructured</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mach.logging.LoggingManager.disable_unstructured" title="Permalink to this definition">¶</a></dt>
<dd><p>Disable logging of unstructured messages.</p>
</dd></dl>

<dl class="method">
<dt id="mach.logging.LoggingManager.enable_all_structured_loggers">
<code class="descname">enable_all_structured_loggers</code><span class="sig-paren">(</span><em>terminal=True</em>, <em>json=True</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.logging.LoggingManager.enable_all_structured_loggers" title="Permalink to this definition">¶</a></dt>
<dd><p>Enable logging of all structured messages from all loggers.</p>
<p><code class="docutils literal"><span class="pre">terminal</span></code> and <code class="docutils literal"><span class="pre">json</span></code> determine which log handlers to operate
on. By default, all known handlers are operated on.</p>
</dd></dl>

<dl class="method">
<dt id="mach.logging.LoggingManager.enable_unstructured">
<code class="descname">enable_unstructured</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mach.logging.LoggingManager.enable_unstructured" title="Permalink to this definition">¶</a></dt>
<dd><p>Enable logging of unstructured messages.</p>
</dd></dl>

<dl class="method">
<dt id="mach.logging.LoggingManager.register_structured_logger">
<code class="descname">register_structured_logger</code><span class="sig-paren">(</span><em>logger</em>, <em>terminal=True</em>, <em>json=True</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.logging.LoggingManager.register_structured_logger" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a structured logger.</p>
<p>This needs to be called for all structured loggers that don’t chain up
to the mach logger in order for their output to be captured.</p>
</dd></dl>

<dl class="method">
<dt id="mach.logging.LoggingManager.replace_terminal_handler">
<code class="descname">replace_terminal_handler</code><span class="sig-paren">(</span><em>handler</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.logging.LoggingManager.replace_terminal_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>Replace the installed terminal handler.</p>
<p>Returns the old handler or None if none was configured.
If the new handler is None, removes any existing handler and disables
logging to the terminal.</p>
</dd></dl>

<dl class="attribute">
<dt id="mach.logging.LoggingManager.terminal">
<code class="descname">terminal</code><a class="headerlink" href="#mach.logging.LoggingManager.terminal" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="mach.logging.StructuredHumanFormatter">
<em class="property">class </em><code class="descclassname">mach.logging.</code><code class="descname">StructuredHumanFormatter</code><span class="sig-paren">(</span><em>start_time</em>, <em>write_interval=False</em>, <em>write_times=True</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.logging.StructuredHumanFormatter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">logging.Formatter</span></code></p>
<p>Log formatter that writes structured messages for humans.</p>
<p>It is important that this formatter never be added to a logger that
produces unstructured/classic log messages. If it is, the call to format()
could fail because the string could contain things (like JSON) that look
like formatting character sequences.</p>
<p>Because of this limitation, format() will fail with a KeyError if an
unstructured record is passed or if the structured message is malformed.</p>
<dl class="method">
<dt id="mach.logging.StructuredHumanFormatter.format">
<code class="descname">format</code><span class="sig-paren">(</span><em>record</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.logging.StructuredHumanFormatter.format" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="mach.logging.StructuredJSONFormatter">
<em class="property">class </em><code class="descclassname">mach.logging.</code><code class="descname">StructuredJSONFormatter</code><span class="sig-paren">(</span><em>fmt=None</em>, <em>datefmt=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.logging.StructuredJSONFormatter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">logging.Formatter</span></code></p>
<p>Log formatter that writes a structured JSON entry.</p>
<dl class="method">
<dt id="mach.logging.StructuredJSONFormatter.format">
<code class="descname">format</code><span class="sig-paren">(</span><em>record</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.logging.StructuredJSONFormatter.format" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="mach.logging.StructuredTerminalFormatter">
<em class="property">class </em><code class="descclassname">mach.logging.</code><code class="descname">StructuredTerminalFormatter</code><span class="sig-paren">(</span><em>start_time</em>, <em>write_interval=False</em>, <em>write_times=True</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.logging.StructuredTerminalFormatter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#mach.logging.StructuredHumanFormatter" title="mach.logging.StructuredHumanFormatter"><code class="xref py py-class docutils literal"><span class="pre">mach.logging.StructuredHumanFormatter</span></code></a></p>
<p>Log formatter for structured messages writing to a terminal.</p>
<dl class="method">
<dt id="mach.logging.StructuredTerminalFormatter.format">
<code class="descname">format</code><span class="sig-paren">(</span><em>record</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.logging.StructuredTerminalFormatter.format" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mach.logging.StructuredTerminalFormatter.set_terminal">
<code class="descname">set_terminal</code><span class="sig-paren">(</span><em>terminal</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.logging.StructuredTerminalFormatter.set_terminal" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="mach.logging.format_seconds">
<code class="descclassname">mach.logging.</code><code class="descname">format_seconds</code><span class="sig-paren">(</span><em>total</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.logging.format_seconds" title="Permalink to this definition">¶</a></dt>
<dd><p>Format number of seconds to MM:SS.DD form.</p>
</dd></dl>

</div>
<div class="section" id="module-mach.main">
<span id="mach-main-module"></span><h2>mach.main module<a class="headerlink" href="#module-mach.main" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="mach.main.ArgumentParser">
<em class="property">class </em><code class="descclassname">mach.main.</code><code class="descname">ArgumentParser</code><span class="sig-paren">(</span><em>prog=None</em>, <em>usage=None</em>, <em>description=None</em>, <em>epilog=None</em>, <em>version=None</em>, <em>parents=[]</em>, <em>formatter_class=&lt;class 'argparse.HelpFormatter'&gt;</em>, <em>prefix_chars='-'</em>, <em>fromfile_prefix_chars=None</em>, <em>argument_default=None</em>, <em>conflict_handler='error'</em>, <em>add_help=True</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.main.ArgumentParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">argparse.ArgumentParser</span></code></p>
<p>Custom implementation argument parser to make things look pretty.</p>
<dl class="method">
<dt id="mach.main.ArgumentParser.error">
<code class="descname">error</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.main.ArgumentParser.error" title="Permalink to this definition">¶</a></dt>
<dd><p>Custom error reporter to give more helpful text on bad commands.</p>
</dd></dl>

<dl class="method">
<dt id="mach.main.ArgumentParser.format_help">
<code class="descname">format_help</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mach.main.ArgumentParser.format_help" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="mach.main.ContextWrapper">
<em class="property">class </em><code class="descclassname">mach.main.</code><code class="descname">ContextWrapper</code><span class="sig-paren">(</span><em>context</em>, <em>handler</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.main.ContextWrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
</dd></dl>

<dl class="class">
<dt id="mach.main.Mach">
<em class="property">class </em><code class="descclassname">mach.main.</code><code class="descname">Mach</code><span class="sig-paren">(</span><em>cwd</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.main.Mach" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Main mach driver type.</p>
<p>This type is responsible for holding global mach state and dispatching
a command from arguments.</p>
<p>The following attributes may be assigned to the instance to influence
behavior:</p>
<blockquote>
<div><dl class="docutils">
<dt>populate_context_handler – If defined, it must be a callable. The</dt>
<dd><dl class="first docutils">
<dt>callable signature is the following:</dt>
<dd>populate_context_handler(context, key=None)</dd>
</dl>
<p class="last">It acts as a fallback getter for the mach.base.CommandContext
instance.
This allows to augment the context instance with arbitrary data
for use in command handlers.
For backwards compatibility, it is also called before command
dispatch without a key, allowing the context handler to add
attributes to the context instance.</p>
</dd>
<dt>require_conditions – If True, commands that do not have any condition</dt>
<dd>functions applied will be skipped. Defaults to False.</dd>
<dt>settings_paths – A list of files or directories in which to search</dt>
<dd>for settings files to load.</dd>
</dl>
</div></blockquote>
<dl class="attribute">
<dt id="mach.main.Mach.USAGE">
<code class="descname">USAGE</code><em class="property"> = u'%(prog)s [global arguments] command [command arguments]\n\nmach (German for &quot;do&quot;) is the main interface to the Mozilla build system and\ncommon developer tasks.\n\nYou tell mach the command you want to perform and it does it for you.\n\nSome common commands are:\n\n    %(prog)s build     Build/compile the source tree.\n    %(prog)s help      Show full help, including the list of all commands.\n\nTo see more help for a specific command, run:\n\n  %(prog)s help &lt;command&gt;\n'</em><a class="headerlink" href="#mach.main.Mach.USAGE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mach.main.Mach.add_global_argument">
<code class="descname">add_global_argument</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.main.Mach.add_global_argument" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a global argument with the argument parser.</p>
<p>Arguments are proxied to ArgumentParser.add_argument()</p>
</dd></dl>

<dl class="method">
<dt id="mach.main.Mach.define_category">
<code class="descname">define_category</code><span class="sig-paren">(</span><em>name</em>, <em>title</em>, <em>description</em>, <em>priority=50</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.main.Mach.define_category" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide a description for a named command category.</p>
</dd></dl>

<dl class="method">
<dt id="mach.main.Mach.get_argument_parser">
<code class="descname">get_argument_parser</code><span class="sig-paren">(</span><em>context</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.main.Mach.get_argument_parser" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an argument parser for the command-line interface.</p>
</dd></dl>

<dl class="method">
<dt id="mach.main.Mach.load_commands_from_directory">
<code class="descname">load_commands_from_directory</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.main.Mach.load_commands_from_directory" title="Permalink to this definition">¶</a></dt>
<dd><p>Scan for mach commands from modules in a directory.</p>
<p>This takes a path to a directory, loads the .py files in it, and
registers and found mach command providers with this mach instance.</p>
</dd></dl>

<dl class="method">
<dt id="mach.main.Mach.load_commands_from_entry_point">
<code class="descname">load_commands_from_entry_point</code><span class="sig-paren">(</span><em>group=u'mach.providers'</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.main.Mach.load_commands_from_entry_point" title="Permalink to this definition">¶</a></dt>
<dd><p>Scan installed packages for mach command provider entry points. An
entry point is a function that returns a list of paths to files or
directories containing command providers.</p>
<p>This takes an optional group argument which specifies the entry point
group to use. If not specified, it defaults to ‘mach.providers’.</p>
</dd></dl>

<dl class="method">
<dt id="mach.main.Mach.load_commands_from_file">
<code class="descname">load_commands_from_file</code><span class="sig-paren">(</span><em>path</em>, <em>module_name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.main.Mach.load_commands_from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Scan for mach commands from a file.</p>
<p>This takes a path to a file and loads it as a Python module under the
module name specified. If no name is specified, a random one will be
chosen.</p>
</dd></dl>

<dl class="method">
<dt id="mach.main.Mach.load_settings">
<code class="descname">load_settings</code><span class="sig-paren">(</span><em>paths</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.main.Mach.load_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the specified settings files.</p>
<p>If a directory is specified, the following basenames will be
searched for in this order:</p>
<blockquote>
<div>machrc, .machrc</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="mach.main.Mach.log">
<code class="descname">log</code><span class="sig-paren">(</span><em>level</em>, <em>action</em>, <em>params</em>, <em>format_str</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.main.Mach.log" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper method to record a structured log event.</p>
</dd></dl>

<dl class="attribute">
<dt id="mach.main.Mach.require_conditions">
<code class="descname">require_conditions</code><a class="headerlink" href="#mach.main.Mach.require_conditions" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mach.main.Mach.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>argv</em>, <em>stdin=None</em>, <em>stdout=None</em>, <em>stderr=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.main.Mach.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs mach with arguments provided from the command line.</p>
<p>Returns the integer exit code that should be used. 0 means success. All
other values indicate failure.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-mach.registrar">
<span id="mach-registrar-module"></span><h2>mach.registrar module<a class="headerlink" href="#module-mach.registrar" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="mach.registrar.MachRegistrar">
<em class="property">class </em><code class="descclassname">mach.registrar.</code><code class="descname">MachRegistrar</code><a class="headerlink" href="#mach.registrar.MachRegistrar" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Container for mach command and config providers.</p>
<dl class="method">
<dt id="mach.registrar.MachRegistrar.dispatch">
<code class="descname">dispatch</code><span class="sig-paren">(</span><em>name</em>, <em>context=None</em>, <em>argv=None</em>, <em>subcommand=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.registrar.MachRegistrar.dispatch" title="Permalink to this definition">¶</a></dt>
<dd><p>Dispatch/run a command.</p>
<p>Commands can use this to call other commands.</p>
</dd></dl>

<dl class="method">
<dt id="mach.registrar.MachRegistrar.register_category">
<code class="descname">register_category</code><span class="sig-paren">(</span><em>name</em>, <em>title</em>, <em>description</em>, <em>priority=50</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.registrar.MachRegistrar.register_category" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mach.registrar.MachRegistrar.register_command_handler">
<code class="descname">register_command_handler</code><span class="sig-paren">(</span><em>handler</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.registrar.MachRegistrar.register_command_handler" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mach.registrar.MachRegistrar.register_settings_provider">
<code class="descname">register_settings_provider</code><span class="sig-paren">(</span><em>cls</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.registrar.MachRegistrar.register_settings_provider" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-mach.terminal">
<span id="mach-terminal-module"></span><h2>mach.terminal module<a class="headerlink" href="#module-mach.terminal" title="Permalink to this headline">¶</a></h2>
<p>This file contains code for interacting with terminals.</p>
<p>All the terminal interaction code is consolidated so the complexity can be in
one place, away from code that is commonly looked at.</p>
<dl class="class">
<dt id="mach.terminal.LoggingHandler">
<em class="property">class </em><code class="descclassname">mach.terminal.</code><code class="descname">LoggingHandler</code><a class="headerlink" href="#mach.terminal.LoggingHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">logging.Handler</span></code></p>
<p>Custom logging handler that works with terminal window dressing.</p>
<p>This is alternative terminal logging handler which contains smarts for
emitting terminal control characters properly. Currently, it has generic
support for “footer” elements at the bottom of the screen. Functionality
can be added when needed.</p>
<dl class="method">
<dt id="mach.terminal.LoggingHandler.emit">
<code class="descname">emit</code><span class="sig-paren">(</span><em>record</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.terminal.LoggingHandler.emit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mach.terminal.LoggingHandler.flush">
<code class="descname">flush</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mach.terminal.LoggingHandler.flush" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="mach.terminal.TerminalFooter">
<em class="property">class </em><code class="descclassname">mach.terminal.</code><code class="descname">TerminalFooter</code><span class="sig-paren">(</span><em>terminal</em><span class="sig-paren">)</span><a class="headerlink" href="#mach.terminal.TerminalFooter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Represents something drawn on the bottom of a terminal.</p>
<dl class="method">
<dt id="mach.terminal.TerminalFooter.clear">
<code class="descname">clear</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mach.terminal.TerminalFooter.clear" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="mach.terminal.TerminalFooter.draw">
<code class="descname">draw</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mach.terminal.TerminalFooter.draw" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-mach">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-mach" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="mach.commands.html" class="btn btn-neutral float-right" title="mach.commands package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../tools/lint/linters/flake8.html" class="btn btn-neutral" title="Flake8" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright .

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'59.0a1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>